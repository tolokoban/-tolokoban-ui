"use strict";(self.webpackChunk_tolokoban_ui=self.webpackChunk_tolokoban_ui||[]).push([[161],{6828:(A,n,e)=>{e.d(n,{A:()=>i});var t=e(1354),o=e.n(t),a=e(6314),s=e.n(a)()(o());s.push([A.id,".\\---lib-dist-view-InputImage-InputImage-module_InputImage_UOZTn0 {\n    position: relative;\n    background-repeat: repeat;\n}\n\n.\\---lib-dist-view-InputImage-InputImage-module_InputImage_UOZTn0 > * {\n    position: absolute;\n    left: 0;\n    top: 0;\n    width: 100%;\n    height: 100%;\n}\n\n.\\---lib-dist-view-InputImage-InputImage-module_busy_hwei8O {\n    transition: all 0.3s;\n    opacity: 1;\n}\n\n.\\---lib-dist-view-InputImage-InputImage-module_notBusy_n7_vry {\n    transition: all 0.3s;\n    opacity: 0;\n}\n","",{version:3,sources:["webpack://./../lib/dist/view/InputImage/InputImage.module.css"],names:[],mappings:"AAAA;IACI,kBAAkB;IAClB,yBAAyB;AAC7B;;AAEA;IACI,kBAAkB;IAClB,OAAO;IACP,MAAM;IACN,WAAW;IACX,YAAY;AAChB;;AAEA;IACI,oBAAoB;IACpB,UAAU;AACd;;AAEA;IACI,oBAAoB;IACpB,UAAU;AACd",sourcesContent:[".InputImage {\n    position: relative;\n    background-repeat: repeat;\n}\n\n.InputImage > * {\n    position: absolute;\n    left: 0;\n    top: 0;\n    width: 100%;\n    height: 100%;\n}\n\n.busy {\n    transition: all 0.3s;\n    opacity: 1;\n}\n\n.notBusy {\n    transition: all 0.3s;\n    opacity: 0;\n}\n"],sourceRoot:""}]),s.locals={InputImage:"---lib-dist-view-InputImage-InputImage-module_InputImage_UOZTn0",busy:"---lib-dist-view-InputImage-InputImage-module_busy_hwei8O",notBusy:"---lib-dist-view-InputImage-InputImage-module_notBusy_n7_vry"};const i=s},7872:(A,n,e)=>{e.d(n,{A:()=>i});var t=e(1354),o=e.n(t),a=e(6314),s=e.n(a)()(o());s.push([A.id,".\\---lib-dist-view-Touchable-Touchable-module_Touchable_Fygs2c {\n    display: contents;\n    cursor: pointer;\n}\n","",{version:3,sources:["webpack://./../lib/dist/view/Touchable/Touchable.module.css"],names:[],mappings:"AAAA;IACI,iBAAiB;IACjB,eAAe;AACnB",sourcesContent:[".Touchable {\n    display: contents;\n    cursor: pointer;\n}\n"],sourceRoot:""}]),s.locals={Touchable:"---lib-dist-view-Touchable-Touchable-module_Touchable_Fygs2c"};const i=s},7702:(A,n,e)=>{e.r(n),e.d(n,{default:()=>R});var t=e(4848),o=e(2296),a=e(5865),s=e(6540),i=e(7417),r=e(9142),l=e(6166),u=e(7049),c=e(6516),d=e(615);const g="data:image/jpeg;base64,/9j/4AAQSkZJRgABAQEASABIAAD//gATQ3JlYXRlZCB3aXRoIEdJTVD/2wBDAAMCAgMCAgMDAwMEAwMEBQgFBQQEBQoHBwYIDAoMDAsKCwsNDhIQDQ4RDgsLEBYQERMUFRUVDA8XGBYUGBIUFRT/2wBDAQMEBAUEBQkFBQkUDQsNFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBT/wgARCAAQABADAREAAhEBAxEB/8QAFgABAQEAAAAAAAAAAAAAAAAABwAG/8QAFAEBAAAAAAAAAAAAAAAAAAAAAP/aAAwDAQACEAMQAAAB0IdkIh//xAAUEAEAAAAAAAAAAAAAAAAAAAAg/9oACAEBAAEFAh//xAAUEQEAAAAAAAAAAAAAAAAAAAAg/9oACAEDAQE/AR//xAAUEQEAAAAAAAAAAAAAAAAAAAAg/9oACAECAQE/AR//xAAUEAEAAAAAAAAAAAAAAAAAAAAg/9oACAEBAAY/Ah//xAAUEAEAAAAAAAAAAAAAAAAAAAAg/9oACAEBAAE/IR//2gAMAwEAAgADAAAAEJJP/8QAFBEBAAAAAAAAAAAAAAAAAAAAIP/aAAgBAwEBPxAf/8QAFBEBAAAAAAAAAAAAAAAAAAAAIP/aAAgBAgEBPxAf/8QAFBABAAAAAAAAAAAAAAAAAAAAIP/aAAgBAQABPxAf/9k=";var p=e(5072),I=e.n(p),m=e(7825),h=e.n(m),B=e(7659),b=e.n(B),f=e(5056),E=e.n(f),w=e(540),y=e.n(w),v=e(1113),C=e.n(v),Q=e(6828),U={};U.styleTagTransform=C(),U.setAttributes=E(),U.insert=b().bind(null,"head"),U.domAPI=h(),U.insertStyleElement=y(),I()(Q.A,U);const x=Q.A&&Q.A.locals?Q.A.locals:void 0;function F(A){const{value:n,onChange:e,width:o,height:a,busyIcon:p=d.A}=A,I=s.useRef(null),m=s.useRef(null),[h,B]=s.useState(!1),b=function(A,n){const e=s.useCallback((e=>(0,i.sH)(this,void 0,void 0,(function*(){const t=yield function(A){return(0,i.sH)(this,void 0,void 0,(function*(){return new Promise((n=>{const e=new Image;e.crossOrigin="Anonymous",e.onload=()=>{n(e)},e.onerror=()=>{console.error("Unable to load image:",A),n(null)},e.src=A}))}))}(e);if(!t)return null;const o=n.current;if(o){const n=o.getContext("2d");if(!n)throw Error("unable to get a 2D context!");const e=o.width,a=o.height;n.clearRect(0,0,e,a);const s=e/t.width,i=a/t.height,r=Math.max(s,i),l=t.width*r,u=t.height*r,c=.5*(e-l),d=.5*(a-u);n.drawImage(t,c,d,l,u);const g=o.toDataURL("image/webp",.7);return g===A?null:g}return null}))),[n,A]);return(0,s.useEffect)((()=>{e(A)}),[e,A]),e}(n,I),f=Object.assign({},(0,l.G)(A));return(0,t.jsx)(c.t,{onClick:()=>{const A=m.current;A&&A.click()},children:(0,t.jsxs)("div",{className:r.A.classNames.join(A.className,x.InputImage),style:Object.assign(Object.assign({},f),{maxWidth:`${o}px`,height:0,paddingBottom:100*a/o+"%",backgroundImage:`url(${g})`}),children:[(0,t.jsx)("canvas",{width:o,height:a,ref:I}),(0,t.jsx)(u.s,{className:h?x.busy:x.notBusy,display:"grid",placeItems:"center",color:"neutral-1-5",children:(0,t.jsx)(p,{size:"XL",animate:!0})}),(0,t.jsx)("input",{ref:m,type:"file",style:{display:"none"},accept:"image/*",multiple:!1,onChange:A=>{var n;const t=A.target;if(!t)return;const o=null===(n=t.files)||void 0===n?void 0:n[0];if(o)try{B(!0);const A=new FileReader;A.addEventListener("load",(()=>{const n=A.result;"string"==typeof n?b(n).then((A=>{A&&e(A)})).catch(console.error):console.error("URL should be a string and not a:",n)})),A.addEventListener("error",(A=>{console.error(`Unable to load file "${o.name}":`,A)})),A.readAsDataURL(o)}catch(A){console.error("Error in handleFileChange(): "),console.error(A)}finally{B(!1)}}})]})})}const j=e.p+"img/girl.c6a7d31f2d0f73e18757.jpg";function k(){const[A,n]=s.useState(j);return(0,t.jsx)(F,{width:320,height:240,value:A,onChange:n})}function _(){return(0,t.jsx)(o.A,{title:'import { ViewInputImage } from "@tolokoban/ui"',children:(0,t.jsx)(a.A,{description:"# Default usage\n",example:'import React from "react"\nimport { ViewInputImage } from "@tolokoban/ui"\n\nimport ImageUrl from "./girl.jpg"\n\nexport default function Demo() {\n    const [url, setUrl] = React.useState(ImageUrl)\n    return (\n        <ViewInputImage\n            width={320}\n            height={240}\n            value={url}\n            onChange={setUrl}\n        />\n    )\n}\n',children:(0,t.jsx)(k,{})})})}function R(){return(0,t.jsx)(_,{})}},6516:(A,n,e)=>{e.d(n,{t:()=>E});var t=e(4848),o=e(9142),a=e(5072),s=e.n(a),i=e(7825),r=e.n(i),l=e(7659),u=e.n(l),c=e(5056),d=e.n(c),g=e(540),p=e.n(g),I=e(1113),m=e.n(I),h=e(7872),B={};B.styleTagTransform=m(),B.setAttributes=d(),B.insert=u().bind(null,"head"),B.domAPI=r(),B.insertStyleElement=p(),s()(h.A,B);const b=h.A&&h.A.locals?h.A.locals:void 0,f=o.A.classNames;function E({className:A,children:n,tag:e,tooltip:o,onClick:a}){return a?(0,t.jsx)("div",{className:f.join(A,b.Touchable),title:o,onClick:()=>a(e),children:n}):(0,t.jsx)(t.Fragment,{children:n})}},615:(A,n,e)=>{e.d(n,{A:()=>t});const t=(0,e(4530).B)("M12,4V2A10,10 0 0,0 2,12H4A8,8 0 0,1 12,4Z","IconLoading")},7417:(A,n,e)=>{function t(A,n){var e={};for(var t in A)Object.prototype.hasOwnProperty.call(A,t)&&n.indexOf(t)<0&&(e[t]=A[t]);if(null!=A&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(t=Object.getOwnPropertySymbols(A);o<t.length;o++)n.indexOf(t[o])<0&&Object.prototype.propertyIsEnumerable.call(A,t[o])&&(e[t[o]]=A[t[o]])}return e}function o(A,n,e,t){return new(e||(e=Promise))((function(o,a){function s(A){try{r(t.next(A))}catch(A){a(A)}}function i(A){try{r(t.throw(A))}catch(A){a(A)}}function r(A){var n;A.done?o(A.value):(n=A.value,n instanceof e?n:new e((function(A){A(n)}))).then(s,i)}r((t=t.apply(A,n||[])).next())}))}e.d(n,{Tt:()=>t,sH:()=>o}),Object.create,Object.create,"function"==typeof SuppressedError&&SuppressedError}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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S0FJakJpRixLQUFLc0MsRUFBV0csRUFBVyxDQUM3R0YsR0FBTUgsRUFBWUEsRUFBVU8sTUFBTVYsRUFBU0MsR0FBYyxLQUFLTSxPQUNsRSxHQUNGLEMsMkJBOEI2QnhFLE9BQU80RSxPQTBHWDVFLE9BQU80RSxPQXlEa0IsbUJBQXBCQyxpQkFBaUNBLGUiLCJzb3VyY2VzIjpbIi9ob21lL3RvbG9rb2Jhbi9Db2RlL2dpdGh1Yi9AdG9sb2tvYmFuL3VpL2xpYi9kaXN0L3ZpZXcvSW5wdXRJbWFnZS9JbnB1dEltYWdlLm1vZHVsZS5jc3MiLCIvaG9tZS90b2xva29iYW4vQ29kZS9naXRodWIvQHRvbG9rb2Jhbi91aS9saWIvZGlzdC92aWV3L1RvdWNoYWJsZS9Ub3VjaGFibGUubW9kdWxlLmNzcyIsIndlYnBhY2s6Ly9AdG9sb2tvYmFuL3VpLy4uL2xpYi9kaXN0L3ZpZXcvSW5wdXRJbWFnZS9JbnB1dEltYWdlLm1vZHVsZS5jc3M/OWNiYiIsIi9ob21lL3RvbG9rb2Jhbi9Db2RlL2dpdGh1Yi9AdG9sb2tvYmFuL3VpL2xpYi9kaXN0L3ZpZXcvSW5wdXRJbWFnZS9JbnB1dEltYWdlLmpzIiwiL2hvbWUvdG9sb2tvYmFuL0NvZGUvZ2l0aHViL0B0b2xva29iYW4vdWkvZG9jL3NyYy9hcHAvdmlldy9JbnB1dEltYWdlL2RlbW8vRGVmYXVsdC9EZWZhdWx0LnRzeCIsIi9ob21lL3RvbG9rb2Jhbi9Db2RlL2dpdGh1Yi9AdG9sb2tvYmFuL3VpL2RvYy9zcmMvYXBwL3ZpZXcvSW5wdXRJbWFnZS9JbnB1dEltYWdlLnRzeCIsIi9ob21lL3RvbG9rb2Jhbi9Db2RlL2dpdGh1Yi9AdG9sb2tvYmFuL3VpL2RvYy9zcmMvYXBwL3ZpZXcvSW5wdXRJbWFnZS9wYWdlLnRzeCIsIndlYnBhY2s6Ly9AdG9sb2tvYmFuL3VpLy4uL2xpYi9kaXN0L3ZpZXcvVG91Y2hhYmxlL1RvdWNoYWJsZS5tb2R1bGUuY3NzPzY0NDMiLCIvaG9tZS90b2xva29iYW4vQ29kZS9naXRodWIvQHRvbG9rb2Jhbi91aS9saWIvZGlzdC92aWV3L1RvdWNoYWJsZS9Ub3VjaGFibGUuanMiLCIvaG9tZS90b2xva29iYW4vQ29kZS9naXRodWIvQHRvbG9rb2Jhbi91aS9saWIvZGlzdC92aWV3L2ljb25zL0ljb25Mb2FkaW5nLmpzIiwiL2hvbWUvdG9sb2tvYmFuL0NvZGUvZ2l0aHViL0B0b2xva29iYW4vdWkvbGliL25vZGVfbW9kdWxlcy90c2xpYi90c2xpYi5lczYubWpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIEltcG9ydHNcbmltcG9ydCBfX19DU1NfTE9BREVSX0FQSV9TT1VSQ0VNQVBfSU1QT1JUX19fIGZyb20gXCIuLi8uLi8uLi8uLi9kb2Mvbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvZGlzdC9ydW50aW1lL3NvdXJjZU1hcHMuanNcIjtcbmltcG9ydCBfX19DU1NfTE9BREVSX0FQSV9JTVBPUlRfX18gZnJvbSBcIi4uLy4uLy4uLy4uL2RvYy9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9kaXN0L3J1bnRpbWUvYXBpLmpzXCI7XG52YXIgX19fQ1NTX0xPQURFUl9FWFBPUlRfX18gPSBfX19DU1NfTE9BREVSX0FQSV9JTVBPUlRfX18oX19fQ1NTX0xPQURFUl9BUElfU09VUkNFTUFQX0lNUE9SVF9fXyk7XG4vLyBNb2R1bGVcbl9fX0NTU19MT0FERVJfRVhQT1JUX19fLnB1c2goW21vZHVsZS5pZCwgYC5cXFxcLS0tbGliLWRpc3Qtdmlldy1JbnB1dEltYWdlLUlucHV0SW1hZ2UtbW9kdWxlX0lucHV0SW1hZ2VfVU9aVG4wIHtcbiAgICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gICAgYmFja2dyb3VuZC1yZXBlYXQ6IHJlcGVhdDtcbn1cblxuLlxcXFwtLS1saWItZGlzdC12aWV3LUlucHV0SW1hZ2UtSW5wdXRJbWFnZS1tb2R1bGVfSW5wdXRJbWFnZV9VT1pUbjAgPiAqIHtcbiAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgbGVmdDogMDtcbiAgICB0b3A6IDA7XG4gICAgd2lkdGg6IDEwMCU7XG4gICAgaGVpZ2h0OiAxMDAlO1xufVxuXG4uXFxcXC0tLWxpYi1kaXN0LXZpZXctSW5wdXRJbWFnZS1JbnB1dEltYWdlLW1vZHVsZV9idXN5X2h3ZWk4TyB7XG4gICAgdHJhbnNpdGlvbjogYWxsIDAuM3M7XG4gICAgb3BhY2l0eTogMTtcbn1cblxuLlxcXFwtLS1saWItZGlzdC12aWV3LUlucHV0SW1hZ2UtSW5wdXRJbWFnZS1tb2R1bGVfbm90QnVzeV9uN192cnkge1xuICAgIHRyYW5zaXRpb246IGFsbCAwLjNzO1xuICAgIG9wYWNpdHk6IDA7XG59XG5gLCBcIlwiLHtcInZlcnNpb25cIjozLFwic291cmNlc1wiOltcIndlYnBhY2s6Ly8uLy4uL2xpYi9kaXN0L3ZpZXcvSW5wdXRJbWFnZS9JbnB1dEltYWdlLm1vZHVsZS5jc3NcIl0sXCJuYW1lc1wiOltdLFwibWFwcGluZ3NcIjpcIkFBQUE7SUFDSSxrQkFBa0I7SUFDbEIseUJBQXlCO0FBQzdCOztBQUVBO0lBQ0ksa0JBQWtCO0lBQ2xCLE9BQU87SUFDUCxNQUFNO0lBQ04sV0FBVztJQUNYLFlBQVk7QUFDaEI7O0FBRUE7SUFDSSxvQkFBb0I7SUFDcEIsVUFBVTtBQUNkOztBQUVBO0lBQ0ksb0JBQW9CO0lBQ3BCLFVBQVU7QUFDZFwiLFwic291cmNlc0NvbnRlbnRcIjpbXCIuSW5wdXRJbWFnZSB7XFxuICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcXG4gICAgYmFja2dyb3VuZC1yZXBlYXQ6IHJlcGVhdDtcXG59XFxuXFxuLklucHV0SW1hZ2UgPiAqIHtcXG4gICAgcG9zaXRpb246IGFic29sdXRlO1xcbiAgICBsZWZ0OiAwO1xcbiAgICB0b3A6IDA7XFxuICAgIHdpZHRoOiAxMDAlO1xcbiAgICBoZWlnaHQ6IDEwMCU7XFxufVxcblxcbi5idXN5IHtcXG4gICAgdHJhbnNpdGlvbjogYWxsIDAuM3M7XFxuICAgIG9wYWNpdHk6IDE7XFxufVxcblxcbi5ub3RCdXN5IHtcXG4gICAgdHJhbnNpdGlvbjogYWxsIDAuM3M7XFxuICAgIG9wYWNpdHk6IDA7XFxufVxcblwiXSxcInNvdXJjZVJvb3RcIjpcIlwifV0pO1xuLy8gRXhwb3J0c1xuX19fQ1NTX0xPQURFUl9FWFBPUlRfX18ubG9jYWxzID0ge1xuXHRcIklucHV0SW1hZ2VcIjogYC0tLWxpYi1kaXN0LXZpZXctSW5wdXRJbWFnZS1JbnB1dEltYWdlLW1vZHVsZV9JbnB1dEltYWdlX1VPWlRuMGAsXG5cdFwiYnVzeVwiOiBgLS0tbGliLWRpc3Qtdmlldy1JbnB1dEltYWdlLUlucHV0SW1hZ2UtbW9kdWxlX2J1c3lfaHdlaThPYCxcblx0XCJub3RCdXN5XCI6IGAtLS1saWItZGlzdC12aWV3LUlucHV0SW1hZ2UtSW5wdXRJbWFnZS1tb2R1bGVfbm90QnVzeV9uN192cnlgXG59O1xuZXhwb3J0IGRlZmF1bHQgX19fQ1NTX0xPQURFUl9FWFBPUlRfX187XG4iLCIvLyBJbXBvcnRzXG5pbXBvcnQgX19fQ1NTX0xPQURFUl9BUElfU09VUkNFTUFQX0lNUE9SVF9fXyBmcm9tIFwiLi4vLi4vLi4vLi4vZG9jL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2Rpc3QvcnVudGltZS9zb3VyY2VNYXBzLmpzXCI7XG5pbXBvcnQgX19fQ1NTX0xPQURFUl9BUElfSU1QT1JUX19fIGZyb20gXCIuLi8uLi8uLi8uLi9kb2Mvbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvZGlzdC9ydW50aW1lL2FwaS5qc1wiO1xudmFyIF9fX0NTU19MT0FERVJfRVhQT1JUX19fID0gX19fQ1NTX0xPQURFUl9BUElfSU1QT1JUX19fKF9fX0NTU19MT0FERVJfQVBJX1NPVVJDRU1BUF9JTVBPUlRfX18pO1xuLy8gTW9kdWxlXG5fX19DU1NfTE9BREVSX0VYUE9SVF9fXy5wdXNoKFttb2R1bGUuaWQsIGAuXFxcXC0tLWxpYi1kaXN0LXZpZXctVG91Y2hhYmxlLVRvdWNoYWJsZS1tb2R1bGVfVG91Y2hhYmxlX0Z5Z3MyYyB7XG4gICAgZGlzcGxheTogY29udGVudHM7XG4gICAgY3Vyc29yOiBwb2ludGVyO1xufVxuYCwgXCJcIix7XCJ2ZXJzaW9uXCI6MyxcInNvdXJjZXNcIjpbXCJ3ZWJwYWNrOi8vLi8uLi9saWIvZGlzdC92aWV3L1RvdWNoYWJsZS9Ub3VjaGFibGUubW9kdWxlLmNzc1wiXSxcIm5hbWVzXCI6W10sXCJtYXBwaW5nc1wiOlwiQUFBQTtJQUNJLGlCQUFpQjtJQUNqQixlQUFlO0FBQ25CXCIsXCJzb3VyY2VzQ29udGVudFwiOltcIi5Ub3VjaGFibGUge1xcbiAgICBkaXNwbGF5OiBjb250ZW50cztcXG4gICAgY3Vyc29yOiBwb2ludGVyO1xcbn1cXG5cIl0sXCJzb3VyY2VSb290XCI6XCJcIn1dKTtcbi8vIEV4cG9ydHNcbl9fX0NTU19MT0FERVJfRVhQT1JUX19fLmxvY2FscyA9IHtcblx0XCJUb3VjaGFibGVcIjogYC0tLWxpYi1kaXN0LXZpZXctVG91Y2hhYmxlLVRvdWNoYWJsZS1tb2R1bGVfVG91Y2hhYmxlX0Z5Z3MyY2Bcbn07XG5leHBvcnQgZGVmYXVsdCBfX19DU1NfTE9BREVSX0VYUE9SVF9fXztcbiIsIlxuICAgICAgaW1wb3J0IEFQSSBmcm9tIFwiIS4uLy4uLy4uLy4uL2RvYy9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2Rpc3QvcnVudGltZS9pbmplY3RTdHlsZXNJbnRvU3R5bGVUYWcuanNcIjtcbiAgICAgIGltcG9ydCBkb21BUEkgZnJvbSBcIiEuLi8uLi8uLi8uLi9kb2Mvbm9kZV9tb2R1bGVzL3N0eWxlLWxvYWRlci9kaXN0L3J1bnRpbWUvc3R5bGVEb21BUEkuanNcIjtcbiAgICAgIGltcG9ydCBpbnNlcnRGbiBmcm9tIFwiIS4uLy4uLy4uLy4uL2RvYy9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2Rpc3QvcnVudGltZS9pbnNlcnRCeVNlbGVjdG9yLmpzXCI7XG4gICAgICBpbXBvcnQgc2V0QXR0cmlidXRlcyBmcm9tIFwiIS4uLy4uLy4uLy4uL2RvYy9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2Rpc3QvcnVudGltZS9zZXRBdHRyaWJ1dGVzV2l0aG91dEF0dHJpYnV0ZXMuanNcIjtcbiAgICAgIGltcG9ydCBpbnNlcnRTdHlsZUVsZW1lbnQgZnJvbSBcIiEuLi8uLi8uLi8uLi9kb2Mvbm9kZV9tb2R1bGVzL3N0eWxlLWxvYWRlci9kaXN0L3J1bnRpbWUvaW5zZXJ0U3R5bGVFbGVtZW50LmpzXCI7XG4gICAgICBpbXBvcnQgc3R5bGVUYWdUcmFuc2Zvcm1GbiBmcm9tIFwiIS4uLy4uLy4uLy4uL2RvYy9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2Rpc3QvcnVudGltZS9zdHlsZVRhZ1RyYW5zZm9ybS5qc1wiO1xuICAgICAgaW1wb3J0IGNvbnRlbnQsICogYXMgbmFtZWRFeHBvcnQgZnJvbSBcIiEhLi4vLi4vLi4vLi4vZG9jL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2Rpc3QvY2pzLmpzPz9ydWxlU2V0WzFdLnJ1bGVzWzZdLnVzZVsxXSEuL0lucHV0SW1hZ2UubW9kdWxlLmNzc1wiO1xuICAgICAgXG4gICAgICBcblxudmFyIG9wdGlvbnMgPSB7fTtcblxub3B0aW9ucy5zdHlsZVRhZ1RyYW5zZm9ybSA9IHN0eWxlVGFnVHJhbnNmb3JtRm47XG5vcHRpb25zLnNldEF0dHJpYnV0ZXMgPSBzZXRBdHRyaWJ1dGVzO1xuXG4gICAgICBvcHRpb25zLmluc2VydCA9IGluc2VydEZuLmJpbmQobnVsbCwgXCJoZWFkXCIpO1xuICAgIFxub3B0aW9ucy5kb21BUEkgPSBkb21BUEk7XG5vcHRpb25zLmluc2VydFN0eWxlRWxlbWVudCA9IGluc2VydFN0eWxlRWxlbWVudDtcblxudmFyIHVwZGF0ZSA9IEFQSShjb250ZW50LCBvcHRpb25zKTtcblxuXG5cbmV4cG9ydCAqIGZyb20gXCIhIS4uLy4uLy4uLy4uL2RvYy9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9kaXN0L2Nqcy5qcz8/cnVsZVNldFsxXS5ydWxlc1s2XS51c2VbMV0hLi9JbnB1dEltYWdlLm1vZHVsZS5jc3NcIjtcbiAgICAgICBleHBvcnQgZGVmYXVsdCBjb250ZW50ICYmIGNvbnRlbnQubG9jYWxzID8gY29udGVudC5sb2NhbHMgOiB1bmRlZmluZWQ7XG4iLCJpbXBvcnQgeyBfX2F3YWl0ZXIgfSBmcm9tIFwidHNsaWJcIjtcbmltcG9ydCB7IGpzeCBhcyBfanN4LCBqc3hzIGFzIF9qc3hzIH0gZnJvbSBcInJlYWN0L2pzeC1ydW50aW1lXCI7XG5pbXBvcnQgUmVhY3QsIHsgdXNlRWZmZWN0IH0gZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgeyBUaGVtZSB9IGZyb20gXCIuLi8uLi90aGVtZS9pbmRleC5qc1wiO1xuaW1wb3J0IHsgc3R5bGVDaGlsZCB9IGZyb20gXCIuLi8uLi90aGVtZS9zdHlsZXMvY2hpbGQuanNcIjtcbmltcG9ydCB7IFZpZXdQYW5lbCB9IGZyb20gXCIuLi9QYW5lbC9pbmRleC5qc1wiO1xuaW1wb3J0IHsgVmlld1RvdWNoYWJsZSB9IGZyb20gXCIuLi9Ub3VjaGFibGUvaW5kZXguanNcIjtcbmltcG9ydCBJY29uTG9hZGluZyBmcm9tIFwiLi4vaWNvbnMvSWNvbkxvYWRpbmcuanNcIjtcbmltcG9ydCBCYWNrVVJMIGZyb20gXCIuL2JhY2suanBnXCI7XG5pbXBvcnQgU3R5bGVzIGZyb20gXCIuL0lucHV0SW1hZ2UubW9kdWxlLmNzc1wiO1xuZXhwb3J0IGZ1bmN0aW9uIFZpZXdJbnB1dEltYWdlKHByb3BzKSB7XG4gICAgY29uc3QgeyB2YWx1ZSwgb25DaGFuZ2UsIHdpZHRoLCBoZWlnaHQsIGJ1c3lJY29uOiBCdXN5SWNvbiA9IEljb25Mb2FkaW5nLCB9ID0gcHJvcHM7XG4gICAgY29uc3QgcmVmQ2FudmFzID0gUmVhY3QudXNlUmVmKG51bGwpO1xuICAgIGNvbnN0IHJlZklucHV0ID0gUmVhY3QudXNlUmVmKG51bGwpO1xuICAgIGNvbnN0IFtidXN5LCBzZXRCdXN5XSA9IFJlYWN0LnVzZVN0YXRlKGZhbHNlKTtcbiAgICBjb25zdCBwYWludE9uQ2FudmFzID0gdXNlQ2FudmFzUGFpbnRlcih2YWx1ZSwgcmVmQ2FudmFzKTtcbiAgICBjb25zdCBzdHlsZSA9IE9iamVjdC5hc3NpZ24oe30sIHN0eWxlQ2hpbGQocHJvcHMpKTtcbiAgICBjb25zdCBoYW5kbGVJbXBvcnQgPSAoZXZ0KSA9PiB7XG4gICAgICAgIHZhciBfYTtcbiAgICAgICAgY29uc3QgaW5wdXQgPSBldnQudGFyZ2V0O1xuICAgICAgICBpZiAoIWlucHV0KVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICBjb25zdCBmaWxlID0gKF9hID0gaW5wdXQuZmlsZXMpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYVswXTtcbiAgICAgICAgaWYgKCFmaWxlKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgc2V0QnVzeSh0cnVlKTtcbiAgICAgICAgICAgIGNvbnN0IHJlYWRlciA9IG5ldyBGaWxlUmVhZGVyKCk7XG4gICAgICAgICAgICByZWFkZXIuYWRkRXZlbnRMaXN0ZW5lcihcImxvYWRcIiwgKCkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IHVybCA9IHJlYWRlci5yZXN1bHQ7XG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiB1cmwgIT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihcIlVSTCBzaG91bGQgYmUgYSBzdHJpbmcgYW5kIG5vdCBhOlwiLCB1cmwpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHBhaW50T25DYW52YXModXJsKVxuICAgICAgICAgICAgICAgICAgICAudGhlbigoZGF0YVVybCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAoZGF0YVVybClcbiAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlKGRhdGFVcmwpO1xuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgIC5jYXRjaChjb25zb2xlLmVycm9yKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmVhZGVyLmFkZEV2ZW50TGlzdGVuZXIoXCJlcnJvclwiLCAoZXgpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGBVbmFibGUgdG8gbG9hZCBmaWxlIFwiJHtmaWxlLm5hbWV9XCI6YCwgZXgpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZWFkZXIucmVhZEFzRGF0YVVSTChmaWxlKTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZXgpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBpbiBoYW5kbGVGaWxlQ2hhbmdlKCk6IFwiKTtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZXgpO1xuICAgICAgICB9XG4gICAgICAgIGZpbmFsbHkge1xuICAgICAgICAgICAgc2V0QnVzeShmYWxzZSk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIGNvbnN0IHRyaWdnZXJGaWxlSW5wdXQgPSAoKSA9PiB7XG4gICAgICAgIGNvbnN0IGlucHV0ID0gcmVmSW5wdXQuY3VycmVudDtcbiAgICAgICAgaWYgKCFpbnB1dClcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgaW5wdXQuY2xpY2soKTtcbiAgICB9O1xuICAgIHJldHVybiAoX2pzeChWaWV3VG91Y2hhYmxlLCB7IG9uQ2xpY2s6IHRyaWdnZXJGaWxlSW5wdXQsIGNoaWxkcmVuOiBfanN4cyhcImRpdlwiLCB7IGNsYXNzTmFtZTogVGhlbWUuY2xhc3NOYW1lcy5qb2luKHByb3BzLmNsYXNzTmFtZSwgU3R5bGVzLklucHV0SW1hZ2UpLCBzdHlsZTogT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCBzdHlsZSksIHsgbWF4V2lkdGg6IGAke3dpZHRofXB4YCwgaGVpZ2h0OiAwLCBwYWRkaW5nQm90dG9tOiBgJHsoMTAwICogaGVpZ2h0KSAvIHdpZHRofSVgLCBiYWNrZ3JvdW5kSW1hZ2U6IGB1cmwoJHtCYWNrVVJMfSlgIH0pLCBjaGlsZHJlbjogW19qc3goXCJjYW52YXNcIiwgeyB3aWR0aDogd2lkdGgsIGhlaWdodDogaGVpZ2h0LCByZWY6IHJlZkNhbnZhcyB9KSwgX2pzeChWaWV3UGFuZWwsIHsgY2xhc3NOYW1lOiBidXN5ID8gU3R5bGVzLmJ1c3kgOiBTdHlsZXMubm90QnVzeSwgZGlzcGxheTogXCJncmlkXCIsIHBsYWNlSXRlbXM6IFwiY2VudGVyXCIsIGNvbG9yOiBcIm5ldXRyYWwtMS01XCIsIGNoaWxkcmVuOiBfanN4KEJ1c3lJY29uLCB7IHNpemU6IFwiWExcIiwgYW5pbWF0ZTogdHJ1ZSB9KSB9KSwgX2pzeChcImlucHV0XCIsIHsgcmVmOiByZWZJbnB1dCwgdHlwZTogXCJmaWxlXCIsIHN0eWxlOiB7IGRpc3BsYXk6IFwibm9uZVwiIH0sIGFjY2VwdDogXCJpbWFnZS8qXCIsIG11bHRpcGxlOiBmYWxzZSwgb25DaGFuZ2U6IGhhbmRsZUltcG9ydCB9KV0gfSkgfSkpO1xufVxuZnVuY3Rpb24gdXNlQ2FudmFzUGFpbnRlcih2YWx1ZSwgcmVmQ2FudmFzKSB7XG4gICAgY29uc3QgaW1wb3J0SW1hZ2UgPSBSZWFjdC51c2VDYWxsYmFjaygodXJsKSA9PiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgIGNvbnN0IGltZyA9IHlpZWxkIGxvYWRJbWFnZSh1cmwpO1xuICAgICAgICBpZiAoIWltZylcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICBjb25zdCBjYW52YXMgPSByZWZDYW52YXMuY3VycmVudDtcbiAgICAgICAgaWYgKGNhbnZhcykge1xuICAgICAgICAgICAgY29uc3QgY3R4ID0gY2FudmFzLmdldENvbnRleHQoXCIyZFwiKTtcbiAgICAgICAgICAgIGlmICghY3R4KVxuICAgICAgICAgICAgICAgIHRocm93IEVycm9yKFwidW5hYmxlIHRvIGdldCBhIDJEIGNvbnRleHQhXCIpO1xuICAgICAgICAgICAgY29uc3QgdyA9IGNhbnZhcy53aWR0aDtcbiAgICAgICAgICAgIGNvbnN0IGggPSBjYW52YXMuaGVpZ2h0O1xuICAgICAgICAgICAgY3R4LmNsZWFyUmVjdCgwLCAwLCB3LCBoKTtcbiAgICAgICAgICAgIGNvbnN0IHNjYWxlWCA9IHcgLyBpbWcud2lkdGg7XG4gICAgICAgICAgICBjb25zdCBzY2FsZVkgPSBoIC8gaW1nLmhlaWdodDtcbiAgICAgICAgICAgIGNvbnN0IHNjYWxlID0gTWF0aC5tYXgoc2NhbGVYLCBzY2FsZVkpO1xuICAgICAgICAgICAgY29uc3QgZHcgPSBpbWcud2lkdGggKiBzY2FsZTtcbiAgICAgICAgICAgIGNvbnN0IGRoID0gaW1nLmhlaWdodCAqIHNjYWxlO1xuICAgICAgICAgICAgY29uc3QgeCA9IDAuNSAqICh3IC0gZHcpO1xuICAgICAgICAgICAgY29uc3QgeSA9IDAuNSAqIChoIC0gZGgpO1xuICAgICAgICAgICAgY3R4LmRyYXdJbWFnZShpbWcsIHgsIHksIGR3LCBkaCk7XG4gICAgICAgICAgICBjb25zdCBkYXRhVXJsID0gY2FudmFzLnRvRGF0YVVSTChcImltYWdlL3dlYnBcIiwgMC43KTtcbiAgICAgICAgICAgIHJldHVybiBkYXRhVXJsID09PSB2YWx1ZSA/IG51bGwgOiBkYXRhVXJsO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH0pLCBbcmVmQ2FudmFzLCB2YWx1ZV0pO1xuICAgIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgICAgIHZvaWQgaW1wb3J0SW1hZ2UodmFsdWUpO1xuICAgIH0sIFtpbXBvcnRJbWFnZSwgdmFsdWVdKTtcbiAgICByZXR1cm4gaW1wb3J0SW1hZ2U7XG59XG5mdW5jdGlvbiBsb2FkSW1hZ2UodXJsKSB7XG4gICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBpbWcgPSBuZXcgSW1hZ2UoKTtcbiAgICAgICAgICAgIGltZy5jcm9zc09yaWdpbiA9IFwiQW5vbnltb3VzXCI7XG4gICAgICAgICAgICBpbWcub25sb2FkID0gKCkgPT4ge1xuICAgICAgICAgICAgICAgIHJlc29sdmUoaW1nKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBpbWcub25lcnJvciA9ICgpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiVW5hYmxlIHRvIGxvYWQgaW1hZ2U6XCIsIHVybCk7XG4gICAgICAgICAgICAgICAgcmVzb2x2ZShudWxsKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBpbWcuc3JjID0gdXJsO1xuICAgICAgICB9KTtcbiAgICB9KTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRhdGE6YXBwbGljYXRpb24vanNvbjtiYXNlNjQsZXlKMlpYSnphVzl1SWpvekxDSm1hV3hsSWpvaVNXNXdkWFJKYldGblpTNXFjeUlzSW5OdmRYSmpaVkp2YjNRaU9pSWlMQ0p6YjNWeVkyVnpJanBiSWk0dUx5NHVMeTR1TDNOeVl5OTJhV1YzTDBsdWNIVjBTVzFoWjJVdlNXNXdkWFJKYldGblpTNTBjM2dpWFN3aWJtRnRaWE1pT2x0ZExDSnRZWEJ3YVc1bmN5STZJanM3UVVGQlFTeFBRVUZQTEV0QlFVc3NSVUZCUlN4RlFVRkZMRk5CUVZNc1JVRkJSU3hOUVVGTkxFOUJRVThzUTBGQlFUdEJRVVY0UXl4UFFVRlBMRVZCUVVVc1MwRkJTeXhGUVVGRkxFMUJRVTBzYzBKQlFYTkNMRU5CUVVFN1FVRkROVU1zVDBGQlR5eEZRVUZ0UWl4VlFVRlZMRVZCUVVVc1RVRkJUU3cyUWtGQk5rSXNRMEZCUVR0QlFVVjZSU3hQUVVGUExFVkJRVVVzVTBGQlV5eEZRVUZGTEUxQlFVMHNiVUpCUVcxQ0xFTkJRVUU3UVVGRE4wTXNUMEZCVHl4RlFVRkZMR0ZCUVdFc1JVRkJSU3hOUVVGTkxIVkNRVUYxUWl4RFFVRkJPMEZCUTNKRUxFOUJRVThzVjBGQlZ5eE5RVUZOTEhsQ1FVRjVRaXhEUVVGQk8wRkJSMnBFTEU5QlFVOHNUMEZCVHl4TlFVRk5MRmxCUVZrc1EwRkJRVHRCUVVWb1F5eFBRVUZQTEUxQlFVMHNUVUZCVFN4NVFrRkJlVUlzUTBGQlFUdEJRV0UxUXl4TlFVRk5MRlZCUVZVc1kwRkJZeXhEUVVGRExFdEJRWE5DTzBsQlEycEVMRTFCUVUwc1JVRkRSaXhMUVVGTExFVkJRMHdzVVVGQlVTeEZRVU5TTEV0QlFVc3NSVUZEVEN4TlFVRk5MRVZCUTA0c1VVRkJVU3hGUVVGRkxGRkJRVkVzUjBGQlJ5eFhRVUZYTEVkQlEyNURMRWRCUVVjc1MwRkJTeXhEUVVGQk8wbEJRMVFzVFVGQlRTeFRRVUZUTEVkQlFVY3NTMEZCU3l4RFFVRkRMRTFCUVUwc1EwRkJNa0lzU1VGQlNTeERRVUZETEVOQlFVRTdTVUZET1VRc1RVRkJUU3hSUVVGUkxFZEJRVWNzUzBGQlN5eERRVUZETEUxQlFVMHNRMEZCTUVJc1NVRkJTU3hEUVVGRExFTkJRVUU3U1VGRE5VUXNUVUZCVFN4RFFVRkRMRWxCUVVrc1JVRkJSU3hQUVVGUExFTkJRVU1zUjBGQlJ5eExRVUZMTEVOQlFVTXNVVUZCVVN4RFFVRkRMRXRCUVVzc1EwRkJReXhEUVVGQk8wbEJRemRETEUxQlFVMHNZVUZCWVN4SFFVRkhMR2RDUVVGblFpeERRVUZETEV0QlFVc3NSVUZCUlN4VFFVRlRMRU5CUVVNc1EwRkJRVHRKUVVONFJDeE5RVUZOTEV0QlFVc3NjVUpCUTBvc1ZVRkJWU3hEUVVGRExFdEJRVXNzUTBGQlF5eERRVU4yUWl4RFFVRkJPMGxCUTBRc1RVRkJUU3haUVVGWkxFZEJRVWNzUTBGQlF5eEhRVUYzUXl4RlFVRkZMRVZCUVVVN08xRkJRemxFTEUxQlFVMHNTMEZCU3l4SFFVRkhMRWRCUVVjc1EwRkJReXhOUVVGTkxFTkJRVUU3VVVGRGVFSXNTVUZCU1N4RFFVRkRMRXRCUVVzN1dVRkJSU3hQUVVGTk8xRkJSV3hDTEUxQlFVMHNTVUZCU1N4SFFVRkhMRTFCUVVFc1MwRkJTeXhEUVVGRExFdEJRVXNzTUVOQlFVY3NRMEZCUXl4RFFVRkRMRU5CUVVFN1VVRkROMElzU1VGQlNTeERRVUZETEVsQlFVazdXVUZCUlN4UFFVRk5PMUZCUldwQ0xFbEJRVWtzUTBGQlF6dFpRVU5FTEU5QlFVOHNRMEZCUXl4SlFVRkpMRU5CUVVNc1EwRkJRVHRaUVVOaUxFMUJRVTBzVFVGQlRTeEhRVUZITEVsQlFVa3NWVUZCVlN4RlFVRkZMRU5CUVVFN1dVRkRMMElzVFVGQlRTeERRVUZETEdkQ1FVRm5RaXhEUVVGRExFMUJRVTBzUlVGQlJTeEhRVUZITEVWQlFVVTdaMEpCUTJwRExFMUJRVTBzUjBGQlJ5eEhRVUZITEUxQlFVMHNRMEZCUXl4TlFVRk5MRU5CUVVFN1owSkJRM3BDTEVsQlFVa3NUMEZCVHl4SFFVRkhMRXRCUVVzc1VVRkJVU3hGUVVGRkxFTkJRVU03YjBKQlF6RkNMRTlCUVU4c1EwRkJReXhMUVVGTExFTkJRVU1zYlVOQlFXMURMRVZCUVVVc1IwRkJSeXhEUVVGRExFTkJRVUU3YjBKQlEzWkVMRTlCUVUwN1owSkJRMVlzUTBGQlF6dG5Ra0ZEUkN4aFFVRmhMRU5CUVVNc1IwRkJSeXhEUVVGRE8zRkNRVU5pTEVsQlFVa3NRMEZCUXl4RFFVRkRMRTlCUVU4c1JVRkJSU3hGUVVGRk8yOUNRVU5rTEVsQlFVa3NUMEZCVHp0M1FrRkJSU3hSUVVGUkxFTkJRVU1zVDBGQlR5eERRVUZETEVOQlFVRTdaMEpCUTJ4RExFTkJRVU1zUTBGQlF6dHhRa0ZEUkN4TFFVRkxMRU5CUVVNc1QwRkJUeXhEUVVGRExFdEJRVXNzUTBGQlF5eERRVUZCTzFsQlF6ZENMRU5CUVVNc1EwRkJReXhEUVVGQk8xbEJRMFlzVFVGQlRTeERRVUZETEdkQ1FVRm5RaXhEUVVGRExFOUJRVThzUlVGQlJTeERRVUZETEVWQlFVVXNSVUZCUlN4RlFVRkZPMmRDUVVOd1F5eFBRVUZQTEVOQlFVTXNTMEZCU3l4RFFVRkRMSGRDUVVGM1FpeEpRVUZKTEVOQlFVTXNTVUZCU1N4SlFVRkpMRVZCUVVVc1JVRkJSU3hEUVVGRExFTkJRVUU3V1VGRE5VUXNRMEZCUXl4RFFVRkRMRU5CUVVFN1dVRkRSaXhOUVVGTkxFTkJRVU1zWVVGQllTeERRVUZETEVsQlFVa3NRMEZCUXl4RFFVRkJPMUZCUXpsQ0xFTkJRVU03VVVGQlF5eFBRVUZQTEVWQlFVVXNSVUZCUlN4RFFVRkRPMWxCUTFZc1QwRkJUeXhEUVVGRExFdEJRVXNzUTBGQlF5d3JRa0ZCSzBJc1EwRkJReXhEUVVGQk8xbEJRemxETEU5QlFVOHNRMEZCUXl4TFFVRkxMRU5CUVVNc1JVRkJSU3hEUVVGRExFTkJRVUU3VVVGRGNrSXNRMEZCUXp0blFrRkJVeXhEUVVGRE8xbEJRMUFzVDBGQlR5eERRVUZETEV0QlFVc3NRMEZCUXl4RFFVRkJPMUZCUTJ4Q0xFTkJRVU03U1VGRFRDeERRVUZETEVOQlFVRTdTVUZEUkN4TlFVRk5MR2RDUVVGblFpeEhRVUZITEVkQlFVY3NSVUZCUlR0UlFVTXhRaXhOUVVGTkxFdEJRVXNzUjBGQlJ5eFJRVUZSTEVOQlFVTXNUMEZCVHl4RFFVRkJPMUZCUXpsQ0xFbEJRVWtzUTBGQlF5eExRVUZMTzFsQlFVVXNUMEZCVFR0UlFVVnNRaXhMUVVGTExFTkJRVU1zUzBGQlN5eEZRVUZGTEVOQlFVRTdTVUZEYWtJc1EwRkJReXhEUVVGQk8wbEJRMFFzVDBGQlR5eERRVU5JTEV0QlFVTXNZVUZCWVN4SlFVRkRMRTlCUVU4c1JVRkJSU3huUWtGQlowSXNXVUZEY0VNc1pVRkRTU3hUUVVGVExFVkJRVVVzUzBGQlN5eERRVUZETEZWQlFWVXNRMEZCUXl4SlFVRkpMRU5CUXpWQ0xFdEJRVXNzUTBGQlF5eFRRVUZUTEVWQlEyWXNUVUZCVFN4RFFVRkRMRlZCUVZVc1EwRkRjRUlzUlVGRFJDeExRVUZMTEd0RFFVTkZMRXRCUVVzc1MwRkRVaXhSUVVGUkxFVkJRVVVzUjBGQlJ5eExRVUZMTEVsQlFVa3NSVUZEZEVJc1RVRkJUU3hGUVVGRkxFTkJRVU1zUlVGRFZDeGhRVUZoTEVWQlFVVXNSMEZCUnl4RFFVRkRMRWRCUVVjc1IwRkJSeXhOUVVGTkxFTkJRVU1zUjBGQlJ5eExRVUZMTEVkQlFVY3NSVUZETTBNc1pVRkJaU3hGUVVGRkxFOUJRVThzVDBGQlR5eEhRVUZITEdkQ1FVZDBReXhwUWtGQlVTeExRVUZMTEVWQlFVVXNTMEZCU3l4RlFVRkZMRTFCUVUwc1JVRkJSU3hOUVVGTkxFVkJRVVVzUjBGQlJ5eEZRVUZGTEZOQlFWTXNSMEZCVnl4RlFVTXZSQ3hMUVVGRExGTkJRVk1zU1VGRFRpeFRRVUZUTEVWQlFVVXNTVUZCU1N4RFFVRkRMRU5CUVVNc1EwRkJReXhOUVVGTkxFTkJRVU1zU1VGQlNTeERRVUZETEVOQlFVTXNRMEZCUXl4TlFVRk5MRU5CUVVNc1QwRkJUeXhGUVVNNVF5eFBRVUZQTEVWQlFVTXNUVUZCVFN4RlFVTmtMRlZCUVZVc1JVRkJReXhSUVVGUkxFVkJRMjVDTEV0QlFVc3NSVUZCUXl4aFFVRmhMRmxCUlc1Q0xFdEJRVU1zVVVGQlVTeEpRVUZETEVsQlFVa3NSVUZCUXl4SlFVRkpMRVZCUVVNc1QwRkJUeXhUUVVGSExFZEJRM1JDTEVWQlExb3NaMEpCUTBrc1IwRkJSeXhGUVVGRkxGRkJRVkVzUlVGRFlpeEpRVUZKTEVWQlFVTXNUVUZCVFN4RlFVTllMRXRCUVVzc1JVRkJSU3hGUVVGRkxFOUJRVThzUlVGQlJTeE5RVUZOTEVWQlFVVXNSVUZETVVJc1RVRkJUU3hGUVVGRExGTkJRVk1zUlVGRGFFSXNVVUZCVVN4RlFVRkZMRXRCUVVzc1JVRkRaaXhSUVVGUkxFVkJRVVVzV1VGQldTeEhRVU40UWl4SlFVTkJMRWRCUTAwc1EwRkRia0lzUTBGQlFUdEJRVU5NTEVOQlFVTTdRVUZGUkN4VFFVRlRMR2RDUVVGblFpeERRVU55UWl4TFFVRmhMRVZCUTJJc1UwRkJNa1E3U1VGRk0wUXNUVUZCVFN4WFFVRlhMRWRCUVVjc1MwRkJTeXhEUVVGRExGZEJRVmNzUTBGRGFrTXNRMEZCVHl4SFFVRlhMRVZCUVRCQ0xFVkJRVVU3VVVGRE1VTXNUVUZCVFN4SFFVRkhMRWRCUVVjc1RVRkJUU3hUUVVGVExFTkJRVU1zUjBGQlJ5eERRVUZETEVOQlFVRTdVVUZEYUVNc1NVRkJTU3hEUVVGRExFZEJRVWM3V1VGQlJTeFBRVUZQTEVsQlFVa3NRMEZCUVR0UlFVVnlRaXhOUVVGTkxFMUJRVTBzUjBGQlJ5eFRRVUZUTEVOQlFVTXNUMEZCVHl4RFFVRkJPMUZCUTJoRExFbEJRVWtzVFVGQlRTeEZRVUZGTEVOQlFVTTdXVUZEVkN4TlFVRk5MRWRCUVVjc1IwRkJSeXhOUVVGTkxFTkJRVU1zVlVGQlZTeERRVUZETEVsQlFVa3NRMEZCUXl4RFFVRkJPMWxCUTI1RExFbEJRVWtzUTBGQlF5eEhRVUZITzJkQ1FVRkZMRTFCUVUwc1MwRkJTeXhEUVVGRExEWkNRVUUyUWl4RFFVRkRMRU5CUVVFN1dVRkZjRVFzVFVGQlRTeERRVUZETEVkQlFVY3NUVUZCVFN4RFFVRkRMRXRCUVVzc1EwRkJRVHRaUVVOMFFpeE5RVUZOTEVOQlFVTXNSMEZCUnl4TlFVRk5MRU5CUVVNc1RVRkJUU3hEUVVGQk8xbEJRM1pDTEVkQlFVY3NRMEZCUXl4VFFVRlRMRU5CUVVNc1EwRkJReXhGUVVGRkxFTkJRVU1zUlVGQlJTeERRVUZETEVWQlFVVXNRMEZCUXl4RFFVRkRMRU5CUVVFN1dVRkRla0lzVFVGQlRTeE5RVUZOTEVkQlFVY3NRMEZCUXl4SFFVRkhMRWRCUVVjc1EwRkJReXhMUVVGTExFTkJRVUU3V1VGRE5VSXNUVUZCVFN4TlFVRk5MRWRCUVVjc1EwRkJReXhIUVVGSExFZEJRVWNzUTBGQlF5eE5RVUZOTEVOQlFVRTdXVUZETjBJc1RVRkJUU3hMUVVGTExFZEJRVWNzU1VGQlNTeERRVUZETEVkQlFVY3NRMEZCUXl4TlFVRk5MRVZCUVVVc1RVRkJUU3hEUVVGRExFTkJRVUU3V1VGRGRFTXNUVUZCVFN4RlFVRkZMRWRCUVVjc1IwRkJSeXhEUVVGRExFdEJRVXNzUjBGQlJ5eExRVUZMTEVOQlFVRTdXVUZETlVJc1RVRkJUU3hGUVVGRkxFZEJRVWNzUjBGQlJ5eERRVUZETEUxQlFVMHNSMEZCUnl4TFFVRkxMRU5CUVVFN1dVRkROMElzVFVGQlRTeERRVUZETEVkQlFVY3NSMEZCUnl4SFFVRkhMRU5CUVVNc1EwRkJReXhIUVVGSExFVkJRVVVzUTBGQlF5eERRVUZCTzFsQlEzaENMRTFCUVUwc1EwRkJReXhIUVVGSExFZEJRVWNzUjBGQlJ5eERRVUZETEVOQlFVTXNSMEZCUnl4RlFVRkZMRU5CUVVNc1EwRkJRVHRaUVVONFFpeEhRVUZITEVOQlFVTXNVMEZCVXl4RFFVRkRMRWRCUVVjc1JVRkJSU3hEUVVGRExFVkJRVVVzUTBGQlF5eEZRVUZGTEVWQlFVVXNSVUZCUlN4RlFVRkZMRU5CUVVNc1EwRkJRVHRaUVVOb1F5eE5RVUZOTEU5QlFVOHNSMEZCUnl4TlFVRk5MRU5CUVVNc1UwRkJVeXhEUVVGRExGbEJRVmtzUlVGQlJTeEhRVUZITEVOQlFVTXNRMEZCUVR0WlFVTnVSQ3hQUVVGUExFOUJRVThzUzBGQlN5eExRVUZMTEVOQlFVTXNRMEZCUXl4RFFVRkRMRWxCUVVrc1EwRkJReXhEUVVGRExFTkJRVU1zVDBGQlR5eERRVUZCTzFGQlF6ZERMRU5CUVVNN1VVRkRSQ3hQUVVGUExFbEJRVWtzUTBGQlFUdEpRVU5tTEVOQlFVTXNRMEZCUVN4RlFVTkVMRU5CUVVNc1UwRkJVeXhGUVVGRkxFdEJRVXNzUTBGQlF5eERRVU55UWl4RFFVRkJPMGxCUTBRc1UwRkJVeXhEUVVGRExFZEJRVWNzUlVGQlJUdFJRVU5ZTEV0QlFVc3NWMEZCVnl4RFFVRkRMRXRCUVVzc1EwRkJReXhEUVVGQk8wbEJRek5DTEVOQlFVTXNSVUZCUlN4RFFVRkRMRmRCUVZjc1JVRkJSU3hMUVVGTExFTkJRVU1zUTBGQlF5eERRVUZCTzBsQlEzaENMRTlCUVU4c1YwRkJWeXhEUVVGQk8wRkJRM1JDTEVOQlFVTTdRVUZGUkN4VFFVRmxMRk5CUVZNc1EwRkJReXhIUVVGWE96dFJRVU5vUXl4UFFVRlBMRWxCUVVrc1QwRkJUeXhEUVVGRExFTkJRVU1zVDBGQlR5eEZRVUZGTEVWQlFVVTdXVUZETTBJc1RVRkJUU3hIUVVGSExFZEJRVWNzU1VGQlNTeExRVUZMTEVWQlFVVXNRMEZCUVR0WlFVTjJRaXhIUVVGSExFTkJRVU1zVjBGQlZ5eEhRVUZITEZkQlFWY3NRMEZCUVR0WlFVTTNRaXhIUVVGSExFTkJRVU1zVFVGQlRTeEhRVUZITEVkQlFVY3NSVUZCUlR0blFrRkRaQ3hQUVVGUExFTkJRVU1zUjBGQlJ5eERRVUZETEVOQlFVRTdXVUZEYUVJc1EwRkJReXhEUVVGQk8xbEJRMFFzUjBGQlJ5eERRVUZETEU5QlFVOHNSMEZCUnl4SFFVRkhMRVZCUVVVN1owSkJRMllzVDBGQlR5eERRVUZETEV0QlFVc3NRMEZCUXl4MVFrRkJkVUlzUlVGQlJTeEhRVUZITEVOQlFVTXNRMEZCUVR0blFrRkRNME1zVDBGQlR5eERRVUZETEVsQlFVa3NRMEZCUXl4RFFVRkJPMWxCUTJwQ0xFTkJRVU1zUTBGQlFUdFpRVU5FTEVkQlFVY3NRMEZCUXl4SFFVRkhMRWRCUVVjc1IwRkJSeXhEUVVGQk8xRkJRMnBDTEVOQlFVTXNRMEZCUXl4RFFVRkJPMGxCUTA0c1EwRkJRenREUVVGQkluMD0iLCJpbXBvcnQgUmVhY3QgZnJvbSBcInJlYWN0XCJcbmltcG9ydCB7IFZpZXdJbnB1dEltYWdlIH0gZnJvbSBcIkB0b2xva29iYW4vdWlcIlxuXG5pbXBvcnQgSW1hZ2VVcmwgZnJvbSBcIi4vZ2lybC5qcGdcIlxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBEZW1vKCkge1xuICAgIGNvbnN0IFt1cmwsIHNldFVybF0gPSBSZWFjdC51c2VTdGF0ZShJbWFnZVVybClcbiAgICByZXR1cm4gKFxuICAgICAgICA8Vmlld0lucHV0SW1hZ2VcbiAgICAgICAgICAgIHdpZHRoPXszMjB9XG4gICAgICAgICAgICBoZWlnaHQ9ezI0MH1cbiAgICAgICAgICAgIHZhbHVlPXt1cmx9XG4gICAgICAgICAgICBvbkNoYW5nZT17c2V0VXJsfVxuICAgICAgICAvPlxuICAgIClcbn1cbiIsIi8qKlxuICogMjAyNC0wMy0xMlQxOTo0MzozOS44NTZaXG4gKlxuICogVGhpcyBmaWxlIGhhcyBiZWVuIGF1dG9tYXRpY2FsbHkgZ2VuZXJhdGVkIHdpdGg6XG4gKiBucG0gcnVuIGdlbmVyYXRlXG4gKiBcbiAqIFBsZWFzZSBkbyBub3QgbW9kaWZ5IGl0IG1hbnVhbGx5LlxuICovXG5pbXBvcnQgUmVhY3QgZnJvbSBcInJlYWN0XCJcbmltcG9ydCBWaWV3RG9jdW1lbnRhdGlvbiBmcm9tIFwiQC92aWV3L1ZpZXdEb2N1bWVudGF0aW9uXCJcbmltcG9ydCBWaWV3RGVtbyBmcm9tIFwiQC92aWV3L1ZpZXdEZW1vXCJcbmltcG9ydCBEZW1vRGVmYXVsdCBmcm9tIFwiLi9kZW1vL0RlZmF1bHRcIlxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBJbnB1dEltYWdlRG9jdW1lbnRhdGlvbigpIHtcbiAgICByZXR1cm4gPFZpZXdEb2N1bWVudGF0aW9uIHRpdGxlPSdpbXBvcnQgeyBWaWV3SW5wdXRJbWFnZSB9IGZyb20gXCJAdG9sb2tvYmFuL3VpXCInPlxuICAgICAgICA8Vmlld0RlbW9cbiAgICAgICAgICAgIGRlc2NyaXB0aW9uPXtcIiMgRGVmYXVsdCB1c2FnZVxcblwifVxuICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXRlbXBsYXRlLWN1cmx5LWluLXN0cmluZ1xuICAgICAgICAgICAgZXhhbXBsZT17XCJpbXBvcnQgUmVhY3QgZnJvbSBcXFwicmVhY3RcXFwiXFxuaW1wb3J0IHsgVmlld0lucHV0SW1hZ2UgfSBmcm9tIFxcXCJAdG9sb2tvYmFuL3VpXFxcIlxcblxcbmltcG9ydCBJbWFnZVVybCBmcm9tIFxcXCIuL2dpcmwuanBnXFxcIlxcblxcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIERlbW8oKSB7XFxuICAgIGNvbnN0IFt1cmwsIHNldFVybF0gPSBSZWFjdC51c2VTdGF0ZShJbWFnZVVybClcXG4gICAgcmV0dXJuIChcXG4gICAgICAgIDxWaWV3SW5wdXRJbWFnZVxcbiAgICAgICAgICAgIHdpZHRoPXszMjB9XFxuICAgICAgICAgICAgaGVpZ2h0PXsyNDB9XFxuICAgICAgICAgICAgdmFsdWU9e3VybH1cXG4gICAgICAgICAgICBvbkNoYW5nZT17c2V0VXJsfVxcbiAgICAgICAgLz5cXG4gICAgKVxcbn1cXG5cIn1cbiAgICAgICAgPlxuICAgICAgICAgICAgPERlbW9EZWZhdWx0IC8+XG4gICAgICAgIDwvVmlld0RlbW8+XG4gICAgPC9WaWV3RG9jdW1lbnRhdGlvbj5cbn0iLCIvKipcbiAqIDIwMjQtMDMtMTJUMTk6NDM6MzkuODU2WlxuICpcbiAqIFRoaXMgZmlsZSBoYXMgYmVlbiBhdXRvbWF0aWNhbGx5IGdlbmVyYXRlZCB3aXRoOlxuICogbnBtIHJ1biBnZW5lcmF0ZVxuICogXG4gKiBQbGVhc2UgZG8gbm90IG1vZGlmeSBpdCBtYW51YWxseS5cbiAqL1xuaW1wb3J0IFJlYWN0IGZyb20gXCJyZWFjdFwiXG5pbXBvcnQgVmlld0lucHV0SW1hZ2UgZnJvbSBcIi4vSW5wdXRJbWFnZVwiXG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIFBhZ2VWaWV3SW5wdXRJbWFnZSgpIHtcbiAgICByZXR1cm4gPFZpZXdJbnB1dEltYWdlIC8+XG59XG4iLCJcbiAgICAgIGltcG9ydCBBUEkgZnJvbSBcIiEuLi8uLi8uLi8uLi9kb2Mvbm9kZV9tb2R1bGVzL3N0eWxlLWxvYWRlci9kaXN0L3J1bnRpbWUvaW5qZWN0U3R5bGVzSW50b1N0eWxlVGFnLmpzXCI7XG4gICAgICBpbXBvcnQgZG9tQVBJIGZyb20gXCIhLi4vLi4vLi4vLi4vZG9jL25vZGVfbW9kdWxlcy9zdHlsZS1sb2FkZXIvZGlzdC9ydW50aW1lL3N0eWxlRG9tQVBJLmpzXCI7XG4gICAgICBpbXBvcnQgaW5zZXJ0Rm4gZnJvbSBcIiEuLi8uLi8uLi8uLi9kb2Mvbm9kZV9tb2R1bGVzL3N0eWxlLWxvYWRlci9kaXN0L3J1bnRpbWUvaW5zZXJ0QnlTZWxlY3Rvci5qc1wiO1xuICAgICAgaW1wb3J0IHNldEF0dHJpYnV0ZXMgZnJvbSBcIiEuLi8uLi8uLi8uLi9kb2Mvbm9kZV9tb2R1bGVzL3N0eWxlLWxvYWRlci9kaXN0L3J1bnRpbWUvc2V0QXR0cmlidXRlc1dpdGhvdXRBdHRyaWJ1dGVzLmpzXCI7XG4gICAgICBpbXBvcnQgaW5zZXJ0U3R5bGVFbGVtZW50IGZyb20gXCIhLi4vLi4vLi4vLi4vZG9jL25vZGVfbW9kdWxlcy9zdHlsZS1sb2FkZXIvZGlzdC9ydW50aW1lL2luc2VydFN0eWxlRWxlbWVudC5qc1wiO1xuICAgICAgaW1wb3J0IHN0eWxlVGFnVHJhbnNmb3JtRm4gZnJvbSBcIiEuLi8uLi8uLi8uLi9kb2Mvbm9kZV9tb2R1bGVzL3N0eWxlLWxvYWRlci9kaXN0L3J1bnRpbWUvc3R5bGVUYWdUcmFuc2Zvcm0uanNcIjtcbiAgICAgIGltcG9ydCBjb250ZW50LCAqIGFzIG5hbWVkRXhwb3J0IGZyb20gXCIhIS4uLy4uLy4uLy4uL2RvYy9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9kaXN0L2Nqcy5qcz8/cnVsZVNldFsxXS5ydWxlc1s2XS51c2VbMV0hLi9Ub3VjaGFibGUubW9kdWxlLmNzc1wiO1xuICAgICAgXG4gICAgICBcblxudmFyIG9wdGlvbnMgPSB7fTtcblxub3B0aW9ucy5zdHlsZVRhZ1RyYW5zZm9ybSA9IHN0eWxlVGFnVHJhbnNmb3JtRm47XG5vcHRpb25zLnNldEF0dHJpYnV0ZXMgPSBzZXRBdHRyaWJ1dGVzO1xuXG4gICAgICBvcHRpb25zLmluc2VydCA9IGluc2VydEZuLmJpbmQobnVsbCwgXCJoZWFkXCIpO1xuICAgIFxub3B0aW9ucy5kb21BUEkgPSBkb21BUEk7XG5vcHRpb25zLmluc2VydFN0eWxlRWxlbWVudCA9IGluc2VydFN0eWxlRWxlbWVudDtcblxudmFyIHVwZGF0ZSA9IEFQSShjb250ZW50LCBvcHRpb25zKTtcblxuXG5cbmV4cG9ydCAqIGZyb20gXCIhIS4uLy4uLy4uLy4uL2RvYy9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9kaXN0L2Nqcy5qcz8/cnVsZVNldFsxXS5ydWxlc1s2XS51c2VbMV0hLi9Ub3VjaGFibGUubW9kdWxlLmNzc1wiO1xuICAgICAgIGV4cG9ydCBkZWZhdWx0IGNvbnRlbnQgJiYgY29udGVudC5sb2NhbHMgPyBjb250ZW50LmxvY2FscyA6IHVuZGVmaW5lZDtcbiIsImltcG9ydCB7IEZyYWdtZW50IGFzIF9GcmFnbWVudCwganN4IGFzIF9qc3ggfSBmcm9tIFwicmVhY3QvanN4LXJ1bnRpbWVcIjtcbmltcG9ydCB7IFRoZW1lIH0gZnJvbSBcIi4uLy4uL3RoZW1lL2luZGV4LmpzXCI7XG5pbXBvcnQgU3R5bGVzIGZyb20gXCIuL1RvdWNoYWJsZS5tb2R1bGUuY3NzXCI7XG5jb25zdCAkID0gVGhlbWUuY2xhc3NOYW1lcztcbmV4cG9ydCBmdW5jdGlvbiBWaWV3VG91Y2hhYmxlKHsgY2xhc3NOYW1lLCBjaGlsZHJlbiwgdGFnLCB0b29sdGlwLCBvbkNsaWNrLCB9KSB7XG4gICAgaWYgKCFvbkNsaWNrKVxuICAgICAgICByZXR1cm4gX2pzeChfRnJhZ21lbnQsIHsgY2hpbGRyZW46IGNoaWxkcmVuIH0pO1xuICAgIHJldHVybiAoX2pzeChcImRpdlwiLCB7IGNsYXNzTmFtZTogJC5qb2luKGNsYXNzTmFtZSwgU3R5bGVzLlRvdWNoYWJsZSksIHRpdGxlOiB0b29sdGlwLCBvbkNsaWNrOiAoKSA9PiBvbkNsaWNrKHRhZyksIGNoaWxkcmVuOiBjaGlsZHJlbiB9KSk7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1kYXRhOmFwcGxpY2F0aW9uL2pzb247YmFzZTY0LGV5SjJaWEp6YVc5dUlqb3pMQ0ptYVd4bElqb2lWRzkxWTJoaFlteGxMbXB6SWl3aWMyOTFjbU5sVW05dmRDSTZJaUlzSW5OdmRYSmpaWE1pT2xzaUxpNHZMaTR2TGk0dmMzSmpMM1pwWlhjdlZHOTFZMmhoWW14bEwxUnZkV05vWVdKc1pTNTBjM2dpWFN3aWJtRnRaWE1pT2x0ZExDSnRZWEJ3YVc1bmN5STZJanRCUVVWQkxFOUJRVThzUlVGQlJTeExRVUZMTEVWQlFVVXNUVUZCVFN4elFrRkJjMElzUTBGQlFUdEJRVWMxUXl4UFFVRlBMRTFCUVUwc1RVRkJUU3gzUWtGQmQwSXNRMEZCUVR0QlFVVXpReXhOUVVGTkxFTkJRVU1zUjBGQlJ5eExRVUZMTEVOQlFVTXNWVUZCVlN4RFFVRkJPMEZCYTBJeFFpeE5RVUZOTEZWQlFWVXNZVUZCWVN4RFFVRkpMRVZCUXpkQ0xGTkJRVk1zUlVGRFZDeFJRVUZSTEVWQlExSXNSMEZCUnl4RlFVTklMRTlCUVU4c1JVRkRVQ3hQUVVGUExFZEJRMkU3U1VGRGNFSXNTVUZCU1N4RFFVRkRMRTlCUVU4N1VVRkJSU3hQUVVGUExEUkNRVUZITEZGQlFWRXNSMEZCU1N4RFFVRkJPMGxCUlhCRExFOUJRVThzUTBGRFNDeGpRVU5KTEZOQlFWTXNSVUZCUlN4RFFVRkRMRU5CUVVNc1NVRkJTU3hEUVVGRExGTkJRVk1zUlVGQlJTeE5RVUZOTEVOQlFVTXNVMEZCVXl4RFFVRkRMRVZCUXpsRExFdEJRVXNzUlVGQlJTeFBRVUZQTEVWQlEyUXNUMEZCVHl4RlFVRkZMRWRCUVVjc1JVRkJSU3hEUVVGRExFOUJRVThzUTBGQlF5eEhRVUZITEVOQlFVTXNXVUZGTVVJc1VVRkJVU3hIUVVOUUxFTkJRMVFzUTBGQlFUdEJRVU5NTEVOQlFVTWlmUT09IiwiLyoqXG4gKiBXYXJuaW5nIVxuICogVGhpcyBmaWxlIGhhcyBiZWVuIGdlbmVyYXRlZCBhdXRvbWF0aWNhbGx5XG4gKiBmcm9tIGEgSlNPTiBmaWxlOlxuICogICAgXCIuL2ZhY3RvcnkvaWNvbnMuanNvblwiXG4gKlxuICogWW91IGNhbiBmaW5kIG1vcmUgaWNvbnMgaGVyZTpcbiAqICAgIGh0dHBzOi8vcGljdG9ncmFtbWVycy5jb20vbGlicmFyeS9tZGkvXG4gKi9cbmltcG9ydCB7IG1ha2VJY29uVmlldyB9IGZyb20gXCIuL2ZhY3RvcnkvaW5kZXguanNcIjtcbmNvbnN0IEljb25Mb2FkaW5nID0gbWFrZUljb25WaWV3KFwiTTEyLDRWMkExMCwxMCAwIDAsMCAyLDEySDRBOCw4IDAgMCwxIDEyLDRaXCIsIFwiSWNvbkxvYWRpbmdcIik7XG5leHBvcnQgZGVmYXVsdCBJY29uTG9hZGluZztcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRhdGE6YXBwbGljYXRpb24vanNvbjtiYXNlNjQsZXlKMlpYSnphVzl1SWpvekxDSm1hV3hsSWpvaVNXTnZia3h2WVdScGJtY3Vhbk1pTENKemIzVnlZMlZTYjI5MElqb2lJaXdpYzI5MWNtTmxjeUk2V3lJdUxpOHVMaTh1TGk5emNtTXZkbWxsZHk5cFkyOXVjeTlKWTI5dVRHOWhaR2x1Wnk1MGN5SmRMQ0p1WVcxbGN5STZXMTBzSW0xaGNIQnBibWR6SWpvaVFVRkJRVHM3T3pzN096czdSMEZSUnp0QlFVTklMRTlCUVU4c1JVRkJSU3haUVVGWkxFVkJRVVVzVFVGQlRTeFhRVUZYTEVOQlFVRTdRVUZGZUVNc1RVRkJUU3hYUVVGWExFZEJRVWNzV1VGQldTeERRVU0xUWl3MFEwRkJORU1zUlVGRE5VTXNZVUZCWVN4RFFVTm9RaXhEUVVGQk8wRkJRMFFzWlVGQlpTeFhRVUZYTEVOQlFVRWlmUT09IiwiLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxuQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uXG5cblBlcm1pc3Npb24gdG8gdXNlLCBjb3B5LCBtb2RpZnksIGFuZC9vciBkaXN0cmlidXRlIHRoaXMgc29mdHdhcmUgZm9yIGFueVxucHVycG9zZSB3aXRoIG9yIHdpdGhvdXQgZmVlIGlzIGhlcmVieSBncmFudGVkLlxuXG5USEUgU09GVFdBUkUgSVMgUFJPVklERUQgXCJBUyBJU1wiIEFORCBUSEUgQVVUSE9SIERJU0NMQUlNUyBBTEwgV0FSUkFOVElFUyBXSVRIXG5SRUdBUkQgVE8gVEhJUyBTT0ZUV0FSRSBJTkNMVURJTkcgQUxMIElNUExJRUQgV0FSUkFOVElFUyBPRiBNRVJDSEFOVEFCSUxJVFlcbkFORCBGSVRORVNTLiBJTiBOTyBFVkVOVCBTSEFMTCBUSEUgQVVUSE9SIEJFIExJQUJMRSBGT1IgQU5ZIFNQRUNJQUwsIERJUkVDVCxcbklORElSRUNULCBPUiBDT05TRVFVRU5USUFMIERBTUFHRVMgT1IgQU5ZIERBTUFHRVMgV0hBVFNPRVZFUiBSRVNVTFRJTkcgRlJPTVxuTE9TUyBPRiBVU0UsIERBVEEgT1IgUFJPRklUUywgV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIE5FR0xJR0VOQ0UgT1Jcbk9USEVSIFRPUlRJT1VTIEFDVElPTiwgQVJJU0lORyBPVVQgT0YgT1IgSU4gQ09OTkVDVElPTiBXSVRIIFRIRSBVU0UgT1JcblBFUkZPUk1BTkNFIE9GIFRISVMgU09GVFdBUkUuXG4qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiAqL1xuLyogZ2xvYmFsIFJlZmxlY3QsIFByb21pc2UsIFN1cHByZXNzZWRFcnJvciwgU3ltYm9sICovXG5cbnZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24oZCwgYikge1xuICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYiwgcCkpIGRbcF0gPSBiW3BdOyB9O1xuICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTtcbn07XG5cbmV4cG9ydCBmdW5jdGlvbiBfX2V4dGVuZHMoZCwgYikge1xuICBpZiAodHlwZW9mIGIgIT09IFwiZnVuY3Rpb25cIiAmJiBiICE9PSBudWxsKVxuICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNsYXNzIGV4dGVuZHMgdmFsdWUgXCIgKyBTdHJpbmcoYikgKyBcIiBpcyBub3QgYSBjb25zdHJ1Y3RvciBvciBudWxsXCIpO1xuICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xufVxuXG5leHBvcnQgdmFyIF9fYXNzaWduID0gZnVuY3Rpb24oKSB7XG4gIF9fYXNzaWduID0gT2JqZWN0LmFzc2lnbiB8fCBmdW5jdGlvbiBfX2Fzc2lnbih0KSB7XG4gICAgICBmb3IgKHZhciBzLCBpID0gMSwgbiA9IGFyZ3VtZW50cy5sZW5ndGg7IGkgPCBuOyBpKyspIHtcbiAgICAgICAgICBzID0gYXJndW1lbnRzW2ldO1xuICAgICAgICAgIGZvciAodmFyIHAgaW4gcykgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzLCBwKSkgdFtwXSA9IHNbcF07XG4gICAgICB9XG4gICAgICByZXR1cm4gdDtcbiAgfVxuICByZXR1cm4gX19hc3NpZ24uYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIF9fcmVzdChzLCBlKSB7XG4gIHZhciB0ID0ge307XG4gIGZvciAodmFyIHAgaW4gcykgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzLCBwKSAmJiBlLmluZGV4T2YocCkgPCAwKVxuICAgICAgdFtwXSA9IHNbcF07XG4gIGlmIChzICE9IG51bGwgJiYgdHlwZW9mIE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMgPT09IFwiZnVuY3Rpb25cIilcbiAgICAgIGZvciAodmFyIGkgPSAwLCBwID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhzKTsgaSA8IHAubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICBpZiAoZS5pbmRleE9mKHBbaV0pIDwgMCAmJiBPYmplY3QucHJvdG90eXBlLnByb3BlcnR5SXNFbnVtZXJhYmxlLmNhbGwocywgcFtpXSkpXG4gICAgICAgICAgICAgIHRbcFtpXV0gPSBzW3BbaV1dO1xuICAgICAgfVxuICByZXR1cm4gdDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIF9fZGVjb3JhdGUoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpIHtcbiAgdmFyIGMgPSBhcmd1bWVudHMubGVuZ3RoLCByID0gYyA8IDMgPyB0YXJnZXQgOiBkZXNjID09PSBudWxsID8gZGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodGFyZ2V0LCBrZXkpIDogZGVzYywgZDtcbiAgaWYgKHR5cGVvZiBSZWZsZWN0ID09PSBcIm9iamVjdFwiICYmIHR5cGVvZiBSZWZsZWN0LmRlY29yYXRlID09PSBcImZ1bmN0aW9uXCIpIHIgPSBSZWZsZWN0LmRlY29yYXRlKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKTtcbiAgZWxzZSBmb3IgKHZhciBpID0gZGVjb3JhdG9ycy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkgaWYgKGQgPSBkZWNvcmF0b3JzW2ldKSByID0gKGMgPCAzID8gZChyKSA6IGMgPiAzID8gZCh0YXJnZXQsIGtleSwgcikgOiBkKHRhcmdldCwga2V5KSkgfHwgcjtcbiAgcmV0dXJuIGMgPiAzICYmIHIgJiYgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCByKSwgcjtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIF9fcGFyYW0ocGFyYW1JbmRleCwgZGVjb3JhdG9yKSB7XG4gIHJldHVybiBmdW5jdGlvbiAodGFyZ2V0LCBrZXkpIHsgZGVjb3JhdG9yKHRhcmdldCwga2V5LCBwYXJhbUluZGV4KTsgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gX19lc0RlY29yYXRlKGN0b3IsIGRlc2NyaXB0b3JJbiwgZGVjb3JhdG9ycywgY29udGV4dEluLCBpbml0aWFsaXplcnMsIGV4dHJhSW5pdGlhbGl6ZXJzKSB7XG4gIGZ1bmN0aW9uIGFjY2VwdChmKSB7IGlmIChmICE9PSB2b2lkIDAgJiYgdHlwZW9mIGYgIT09IFwiZnVuY3Rpb25cIikgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkZ1bmN0aW9uIGV4cGVjdGVkXCIpOyByZXR1cm4gZjsgfVxuICB2YXIga2luZCA9IGNvbnRleHRJbi5raW5kLCBrZXkgPSBraW5kID09PSBcImdldHRlclwiID8gXCJnZXRcIiA6IGtpbmQgPT09IFwic2V0dGVyXCIgPyBcInNldFwiIDogXCJ2YWx1ZVwiO1xuICB2YXIgdGFyZ2V0ID0gIWRlc2NyaXB0b3JJbiAmJiBjdG9yID8gY29udGV4dEluW1wic3RhdGljXCJdID8gY3RvciA6IGN0b3IucHJvdG90eXBlIDogbnVsbDtcbiAgdmFyIGRlc2NyaXB0b3IgPSBkZXNjcmlwdG9ySW4gfHwgKHRhcmdldCA/IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodGFyZ2V0LCBjb250ZXh0SW4ubmFtZSkgOiB7fSk7XG4gIHZhciBfLCBkb25lID0gZmFsc2U7XG4gIGZvciAodmFyIGkgPSBkZWNvcmF0b3JzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG4gICAgICB2YXIgY29udGV4dCA9IHt9O1xuICAgICAgZm9yICh2YXIgcCBpbiBjb250ZXh0SW4pIGNvbnRleHRbcF0gPSBwID09PSBcImFjY2Vzc1wiID8ge30gOiBjb250ZXh0SW5bcF07XG4gICAgICBmb3IgKHZhciBwIGluIGNvbnRleHRJbi5hY2Nlc3MpIGNvbnRleHQuYWNjZXNzW3BdID0gY29udGV4dEluLmFjY2Vzc1twXTtcbiAgICAgIGNvbnRleHQuYWRkSW5pdGlhbGl6ZXIgPSBmdW5jdGlvbiAoZikgeyBpZiAoZG9uZSkgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBhZGQgaW5pdGlhbGl6ZXJzIGFmdGVyIGRlY29yYXRpb24gaGFzIGNvbXBsZXRlZFwiKTsgZXh0cmFJbml0aWFsaXplcnMucHVzaChhY2NlcHQoZiB8fCBudWxsKSk7IH07XG4gICAgICB2YXIgcmVzdWx0ID0gKDAsIGRlY29yYXRvcnNbaV0pKGtpbmQgPT09IFwiYWNjZXNzb3JcIiA/IHsgZ2V0OiBkZXNjcmlwdG9yLmdldCwgc2V0OiBkZXNjcmlwdG9yLnNldCB9IDogZGVzY3JpcHRvcltrZXldLCBjb250ZXh0KTtcbiAgICAgIGlmIChraW5kID09PSBcImFjY2Vzc29yXCIpIHtcbiAgICAgICAgICBpZiAocmVzdWx0ID09PSB2b2lkIDApIGNvbnRpbnVlO1xuICAgICAgICAgIGlmIChyZXN1bHQgPT09IG51bGwgfHwgdHlwZW9mIHJlc3VsdCAhPT0gXCJvYmplY3RcIikgdGhyb3cgbmV3IFR5cGVFcnJvcihcIk9iamVjdCBleHBlY3RlZFwiKTtcbiAgICAgICAgICBpZiAoXyA9IGFjY2VwdChyZXN1bHQuZ2V0KSkgZGVzY3JpcHRvci5nZXQgPSBfO1xuICAgICAgICAgIGlmIChfID0gYWNjZXB0KHJlc3VsdC5zZXQpKSBkZXNjcmlwdG9yLnNldCA9IF87XG4gICAgICAgICAgaWYgKF8gPSBhY2NlcHQocmVzdWx0LmluaXQpKSBpbml0aWFsaXplcnMudW5zaGlmdChfKTtcbiAgICAgIH1cbiAgICAgIGVsc2UgaWYgKF8gPSBhY2NlcHQocmVzdWx0KSkge1xuICAgICAgICAgIGlmIChraW5kID09PSBcImZpZWxkXCIpIGluaXRpYWxpemVycy51bnNoaWZ0KF8pO1xuICAgICAgICAgIGVsc2UgZGVzY3JpcHRvcltrZXldID0gXztcbiAgICAgIH1cbiAgfVxuICBpZiAodGFyZ2V0KSBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBjb250ZXh0SW4ubmFtZSwgZGVzY3JpcHRvcik7XG4gIGRvbmUgPSB0cnVlO1xufTtcblxuZXhwb3J0IGZ1bmN0aW9uIF9fcnVuSW5pdGlhbGl6ZXJzKHRoaXNBcmcsIGluaXRpYWxpemVycywgdmFsdWUpIHtcbiAgdmFyIHVzZVZhbHVlID0gYXJndW1lbnRzLmxlbmd0aCA+IDI7XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgaW5pdGlhbGl6ZXJzLmxlbmd0aDsgaSsrKSB7XG4gICAgICB2YWx1ZSA9IHVzZVZhbHVlID8gaW5pdGlhbGl6ZXJzW2ldLmNhbGwodGhpc0FyZywgdmFsdWUpIDogaW5pdGlhbGl6ZXJzW2ldLmNhbGwodGhpc0FyZyk7XG4gIH1cbiAgcmV0dXJuIHVzZVZhbHVlID8gdmFsdWUgOiB2b2lkIDA7XG59O1xuXG5leHBvcnQgZnVuY3Rpb24gX19wcm9wS2V5KHgpIHtcbiAgcmV0dXJuIHR5cGVvZiB4ID09PSBcInN5bWJvbFwiID8geCA6IFwiXCIuY29uY2F0KHgpO1xufTtcblxuZXhwb3J0IGZ1bmN0aW9uIF9fc2V0RnVuY3Rpb25OYW1lKGYsIG5hbWUsIHByZWZpeCkge1xuICBpZiAodHlwZW9mIG5hbWUgPT09IFwic3ltYm9sXCIpIG5hbWUgPSBuYW1lLmRlc2NyaXB0aW9uID8gXCJbXCIuY29uY2F0KG5hbWUuZGVzY3JpcHRpb24sIFwiXVwiKSA6IFwiXCI7XG4gIHJldHVybiBPYmplY3QuZGVmaW5lUHJvcGVydHkoZiwgXCJuYW1lXCIsIHsgY29uZmlndXJhYmxlOiB0cnVlLCB2YWx1ZTogcHJlZml4ID8gXCJcIi5jb25jYXQocHJlZml4LCBcIiBcIiwgbmFtZSkgOiBuYW1lIH0pO1xufTtcblxuZXhwb3J0IGZ1bmN0aW9uIF9fbWV0YWRhdGEobWV0YWRhdGFLZXksIG1ldGFkYXRhVmFsdWUpIHtcbiAgaWYgKHR5cGVvZiBSZWZsZWN0ID09PSBcIm9iamVjdFwiICYmIHR5cGVvZiBSZWZsZWN0Lm1ldGFkYXRhID09PSBcImZ1bmN0aW9uXCIpIHJldHVybiBSZWZsZWN0Lm1ldGFkYXRhKG1ldGFkYXRhS2V5LCBtZXRhZGF0YVZhbHVlKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIF9fYXdhaXRlcih0aGlzQXJnLCBfYXJndW1lbnRzLCBQLCBnZW5lcmF0b3IpIHtcbiAgZnVuY3Rpb24gYWRvcHQodmFsdWUpIHsgcmV0dXJuIHZhbHVlIGluc3RhbmNlb2YgUCA/IHZhbHVlIDogbmV3IFAoZnVuY3Rpb24gKHJlc29sdmUpIHsgcmVzb2x2ZSh2YWx1ZSk7IH0pOyB9XG4gIHJldHVybiBuZXcgKFAgfHwgKFAgPSBQcm9taXNlKSkoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgZnVuY3Rpb24gZnVsZmlsbGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yLm5leHQodmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxuICAgICAgZnVuY3Rpb24gcmVqZWN0ZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3JbXCJ0aHJvd1wiXSh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XG4gICAgICBmdW5jdGlvbiBzdGVwKHJlc3VsdCkgeyByZXN1bHQuZG9uZSA/IHJlc29sdmUocmVzdWx0LnZhbHVlKSA6IGFkb3B0KHJlc3VsdC52YWx1ZSkudGhlbihmdWxmaWxsZWQsIHJlamVjdGVkKTsgfVxuICAgICAgc3RlcCgoZ2VuZXJhdG9yID0gZ2VuZXJhdG9yLmFwcGx5KHRoaXNBcmcsIF9hcmd1bWVudHMgfHwgW10pKS5uZXh0KCkpO1xuICB9KTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIF9fZ2VuZXJhdG9yKHRoaXNBcmcsIGJvZHkpIHtcbiAgdmFyIF8gPSB7IGxhYmVsOiAwLCBzZW50OiBmdW5jdGlvbigpIHsgaWYgKHRbMF0gJiAxKSB0aHJvdyB0WzFdOyByZXR1cm4gdFsxXTsgfSwgdHJ5czogW10sIG9wczogW10gfSwgZiwgeSwgdCwgZztcbiAgcmV0dXJuIGcgPSB7IG5leHQ6IHZlcmIoMCksIFwidGhyb3dcIjogdmVyYigxKSwgXCJyZXR1cm5cIjogdmVyYigyKSB9LCB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgKGdbU3ltYm9sLml0ZXJhdG9yXSA9IGZ1bmN0aW9uKCkgeyByZXR1cm4gdGhpczsgfSksIGc7XG4gIGZ1bmN0aW9uIHZlcmIobikgeyByZXR1cm4gZnVuY3Rpb24gKHYpIHsgcmV0dXJuIHN0ZXAoW24sIHZdKTsgfTsgfVxuICBmdW5jdGlvbiBzdGVwKG9wKSB7XG4gICAgICBpZiAoZikgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkdlbmVyYXRvciBpcyBhbHJlYWR5IGV4ZWN1dGluZy5cIik7XG4gICAgICB3aGlsZSAoZyAmJiAoZyA9IDAsIG9wWzBdICYmIChfID0gMCkpLCBfKSB0cnkge1xuICAgICAgICAgIGlmIChmID0gMSwgeSAmJiAodCA9IG9wWzBdICYgMiA/IHlbXCJyZXR1cm5cIl0gOiBvcFswXSA/IHlbXCJ0aHJvd1wiXSB8fCAoKHQgPSB5W1wicmV0dXJuXCJdKSAmJiB0LmNhbGwoeSksIDApIDogeS5uZXh0KSAmJiAhKHQgPSB0LmNhbGwoeSwgb3BbMV0pKS5kb25lKSByZXR1cm4gdDtcbiAgICAgICAgICBpZiAoeSA9IDAsIHQpIG9wID0gW29wWzBdICYgMiwgdC52YWx1ZV07XG4gICAgICAgICAgc3dpdGNoIChvcFswXSkge1xuICAgICAgICAgICAgICBjYXNlIDA6IGNhc2UgMTogdCA9IG9wOyBicmVhaztcbiAgICAgICAgICAgICAgY2FzZSA0OiBfLmxhYmVsKys7IHJldHVybiB7IHZhbHVlOiBvcFsxXSwgZG9uZTogZmFsc2UgfTtcbiAgICAgICAgICAgICAgY2FzZSA1OiBfLmxhYmVsKys7IHkgPSBvcFsxXTsgb3AgPSBbMF07IGNvbnRpbnVlO1xuICAgICAgICAgICAgICBjYXNlIDc6IG9wID0gXy5vcHMucG9wKCk7IF8udHJ5cy5wb3AoKTsgY29udGludWU7XG4gICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICBpZiAoISh0ID0gXy50cnlzLCB0ID0gdC5sZW5ndGggPiAwICYmIHRbdC5sZW5ndGggLSAxXSkgJiYgKG9wWzBdID09PSA2IHx8IG9wWzBdID09PSAyKSkgeyBfID0gMDsgY29udGludWU7IH1cbiAgICAgICAgICAgICAgICAgIGlmIChvcFswXSA9PT0gMyAmJiAoIXQgfHwgKG9wWzFdID4gdFswXSAmJiBvcFsxXSA8IHRbM10pKSkgeyBfLmxhYmVsID0gb3BbMV07IGJyZWFrOyB9XG4gICAgICAgICAgICAgICAgICBpZiAob3BbMF0gPT09IDYgJiYgXy5sYWJlbCA8IHRbMV0pIHsgXy5sYWJlbCA9IHRbMV07IHQgPSBvcDsgYnJlYWs7IH1cbiAgICAgICAgICAgICAgICAgIGlmICh0ICYmIF8ubGFiZWwgPCB0WzJdKSB7IF8ubGFiZWwgPSB0WzJdOyBfLm9wcy5wdXNoKG9wKTsgYnJlYWs7IH1cbiAgICAgICAgICAgICAgICAgIGlmICh0WzJdKSBfLm9wcy5wb3AoKTtcbiAgICAgICAgICAgICAgICAgIF8udHJ5cy5wb3AoKTsgY29udGludWU7XG4gICAgICAgICAgfVxuICAgICAgICAgIG9wID0gYm9keS5jYWxsKHRoaXNBcmcsIF8pO1xuICAgICAgfSBjYXRjaCAoZSkgeyBvcCA9IFs2LCBlXTsgeSA9IDA7IH0gZmluYWxseSB7IGYgPSB0ID0gMDsgfVxuICAgICAgaWYgKG9wWzBdICYgNSkgdGhyb3cgb3BbMV07IHJldHVybiB7IHZhbHVlOiBvcFswXSA/IG9wWzFdIDogdm9pZCAwLCBkb25lOiB0cnVlIH07XG4gIH1cbn1cblxuZXhwb3J0IHZhciBfX2NyZWF0ZUJpbmRpbmcgPSBPYmplY3QuY3JlYXRlID8gKGZ1bmN0aW9uKG8sIG0sIGssIGsyKSB7XG4gIGlmIChrMiA9PT0gdW5kZWZpbmVkKSBrMiA9IGs7XG4gIHZhciBkZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihtLCBrKTtcbiAgaWYgKCFkZXNjIHx8IChcImdldFwiIGluIGRlc2MgPyAhbS5fX2VzTW9kdWxlIDogZGVzYy53cml0YWJsZSB8fCBkZXNjLmNvbmZpZ3VyYWJsZSkpIHtcbiAgICAgIGRlc2MgPSB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZnVuY3Rpb24oKSB7IHJldHVybiBtW2tdOyB9IH07XG4gIH1cbiAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG8sIGsyLCBkZXNjKTtcbn0pIDogKGZ1bmN0aW9uKG8sIG0sIGssIGsyKSB7XG4gIGlmIChrMiA9PT0gdW5kZWZpbmVkKSBrMiA9IGs7XG4gIG9bazJdID0gbVtrXTtcbn0pO1xuXG5leHBvcnQgZnVuY3Rpb24gX19leHBvcnRTdGFyKG0sIG8pIHtcbiAgZm9yICh2YXIgcCBpbiBtKSBpZiAocCAhPT0gXCJkZWZhdWx0XCIgJiYgIU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvLCBwKSkgX19jcmVhdGVCaW5kaW5nKG8sIG0sIHApO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gX192YWx1ZXMobykge1xuICB2YXIgcyA9IHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiBTeW1ib2wuaXRlcmF0b3IsIG0gPSBzICYmIG9bc10sIGkgPSAwO1xuICBpZiAobSkgcmV0dXJuIG0uY2FsbChvKTtcbiAgaWYgKG8gJiYgdHlwZW9mIG8ubGVuZ3RoID09PSBcIm51bWJlclwiKSByZXR1cm4ge1xuICAgICAgbmV4dDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgIGlmIChvICYmIGkgPj0gby5sZW5ndGgpIG8gPSB2b2lkIDA7XG4gICAgICAgICAgcmV0dXJuIHsgdmFsdWU6IG8gJiYgb1tpKytdLCBkb25lOiAhbyB9O1xuICAgICAgfVxuICB9O1xuICB0aHJvdyBuZXcgVHlwZUVycm9yKHMgPyBcIk9iamVjdCBpcyBub3QgaXRlcmFibGUuXCIgOiBcIlN5bWJvbC5pdGVyYXRvciBpcyBub3QgZGVmaW5lZC5cIik7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBfX3JlYWQobywgbikge1xuICB2YXIgbSA9IHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiBvW1N5bWJvbC5pdGVyYXRvcl07XG4gIGlmICghbSkgcmV0dXJuIG87XG4gIHZhciBpID0gbS5jYWxsKG8pLCByLCBhciA9IFtdLCBlO1xuICB0cnkge1xuICAgICAgd2hpbGUgKChuID09PSB2b2lkIDAgfHwgbi0tID4gMCkgJiYgIShyID0gaS5uZXh0KCkpLmRvbmUpIGFyLnB1c2goci52YWx1ZSk7XG4gIH1cbiAgY2F0Y2ggKGVycm9yKSB7IGUgPSB7IGVycm9yOiBlcnJvciB9OyB9XG4gIGZpbmFsbHkge1xuICAgICAgdHJ5IHtcbiAgICAgICAgICBpZiAociAmJiAhci5kb25lICYmIChtID0gaVtcInJldHVyblwiXSkpIG0uY2FsbChpKTtcbiAgICAgIH1cbiAgICAgIGZpbmFsbHkgeyBpZiAoZSkgdGhyb3cgZS5lcnJvcjsgfVxuICB9XG4gIHJldHVybiBhcjtcbn1cblxuLyoqIEBkZXByZWNhdGVkICovXG5leHBvcnQgZnVuY3Rpb24gX19zcHJlYWQoKSB7XG4gIGZvciAodmFyIGFyID0gW10sIGkgPSAwOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKVxuICAgICAgYXIgPSBhci5jb25jYXQoX19yZWFkKGFyZ3VtZW50c1tpXSkpO1xuICByZXR1cm4gYXI7XG59XG5cbi8qKiBAZGVwcmVjYXRlZCAqL1xuZXhwb3J0IGZ1bmN0aW9uIF9fc3ByZWFkQXJyYXlzKCkge1xuICBmb3IgKHZhciBzID0gMCwgaSA9IDAsIGlsID0gYXJndW1lbnRzLmxlbmd0aDsgaSA8IGlsOyBpKyspIHMgKz0gYXJndW1lbnRzW2ldLmxlbmd0aDtcbiAgZm9yICh2YXIgciA9IEFycmF5KHMpLCBrID0gMCwgaSA9IDA7IGkgPCBpbDsgaSsrKVxuICAgICAgZm9yICh2YXIgYSA9IGFyZ3VtZW50c1tpXSwgaiA9IDAsIGpsID0gYS5sZW5ndGg7IGogPCBqbDsgaisrLCBrKyspXG4gICAgICAgICAgcltrXSA9IGFbal07XG4gIHJldHVybiByO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gX19zcHJlYWRBcnJheSh0bywgZnJvbSwgcGFjaykge1xuICBpZiAocGFjayB8fCBhcmd1bWVudHMubGVuZ3RoID09PSAyKSBmb3IgKHZhciBpID0gMCwgbCA9IGZyb20ubGVuZ3RoLCBhcjsgaSA8IGw7IGkrKykge1xuICAgICAgaWYgKGFyIHx8ICEoaSBpbiBmcm9tKSkge1xuICAgICAgICAgIGlmICghYXIpIGFyID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoZnJvbSwgMCwgaSk7XG4gICAgICAgICAgYXJbaV0gPSBmcm9tW2ldO1xuICAgICAgfVxuICB9XG4gIHJldHVybiB0by5jb25jYXQoYXIgfHwgQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoZnJvbSkpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gX19hd2FpdCh2KSB7XG4gIHJldHVybiB0aGlzIGluc3RhbmNlb2YgX19hd2FpdCA/ICh0aGlzLnYgPSB2LCB0aGlzKSA6IG5ldyBfX2F3YWl0KHYpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gX19hc3luY0dlbmVyYXRvcih0aGlzQXJnLCBfYXJndW1lbnRzLCBnZW5lcmF0b3IpIHtcbiAgaWYgKCFTeW1ib2wuYXN5bmNJdGVyYXRvcikgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN5bWJvbC5hc3luY0l0ZXJhdG9yIGlzIG5vdCBkZWZpbmVkLlwiKTtcbiAgdmFyIGcgPSBnZW5lcmF0b3IuYXBwbHkodGhpc0FyZywgX2FyZ3VtZW50cyB8fCBbXSksIGksIHEgPSBbXTtcbiAgcmV0dXJuIGkgPSB7fSwgdmVyYihcIm5leHRcIiksIHZlcmIoXCJ0aHJvd1wiKSwgdmVyYihcInJldHVyblwiKSwgaVtTeW1ib2wuYXN5bmNJdGVyYXRvcl0gPSBmdW5jdGlvbiAoKSB7IHJldHVybiB0aGlzOyB9LCBpO1xuICBmdW5jdGlvbiB2ZXJiKG4pIHsgaWYgKGdbbl0pIGlbbl0gPSBmdW5jdGlvbiAodikgeyByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKGEsIGIpIHsgcS5wdXNoKFtuLCB2LCBhLCBiXSkgPiAxIHx8IHJlc3VtZShuLCB2KTsgfSk7IH07IH1cbiAgZnVuY3Rpb24gcmVzdW1lKG4sIHYpIHsgdHJ5IHsgc3RlcChnW25dKHYpKTsgfSBjYXRjaCAoZSkgeyBzZXR0bGUocVswXVszXSwgZSk7IH0gfVxuICBmdW5jdGlvbiBzdGVwKHIpIHsgci52YWx1ZSBpbnN0YW5jZW9mIF9fYXdhaXQgPyBQcm9taXNlLnJlc29sdmUoci52YWx1ZS52KS50aGVuKGZ1bGZpbGwsIHJlamVjdCkgOiBzZXR0bGUocVswXVsyXSwgcik7IH1cbiAgZnVuY3Rpb24gZnVsZmlsbCh2YWx1ZSkgeyByZXN1bWUoXCJuZXh0XCIsIHZhbHVlKTsgfVxuICBmdW5jdGlvbiByZWplY3QodmFsdWUpIHsgcmVzdW1lKFwidGhyb3dcIiwgdmFsdWUpOyB9XG4gIGZ1bmN0aW9uIHNldHRsZShmLCB2KSB7IGlmIChmKHYpLCBxLnNoaWZ0KCksIHEubGVuZ3RoKSByZXN1bWUocVswXVswXSwgcVswXVsxXSk7IH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIF9fYXN5bmNEZWxlZ2F0b3Iobykge1xuICB2YXIgaSwgcDtcbiAgcmV0dXJuIGkgPSB7fSwgdmVyYihcIm5leHRcIiksIHZlcmIoXCJ0aHJvd1wiLCBmdW5jdGlvbiAoZSkgeyB0aHJvdyBlOyB9KSwgdmVyYihcInJldHVyblwiKSwgaVtTeW1ib2wuaXRlcmF0b3JdID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gdGhpczsgfSwgaTtcbiAgZnVuY3Rpb24gdmVyYihuLCBmKSB7IGlbbl0gPSBvW25dID8gZnVuY3Rpb24gKHYpIHsgcmV0dXJuIChwID0gIXApID8geyB2YWx1ZTogX19hd2FpdChvW25dKHYpKSwgZG9uZTogZmFsc2UgfSA6IGYgPyBmKHYpIDogdjsgfSA6IGY7IH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIF9fYXN5bmNWYWx1ZXMobykge1xuICBpZiAoIVN5bWJvbC5hc3luY0l0ZXJhdG9yKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3ltYm9sLmFzeW5jSXRlcmF0b3IgaXMgbm90IGRlZmluZWQuXCIpO1xuICB2YXIgbSA9IG9bU3ltYm9sLmFzeW5jSXRlcmF0b3JdLCBpO1xuICByZXR1cm4gbSA/IG0uY2FsbChvKSA6IChvID0gdHlwZW9mIF9fdmFsdWVzID09PSBcImZ1bmN0aW9uXCIgPyBfX3ZhbHVlcyhvKSA6IG9bU3ltYm9sLml0ZXJhdG9yXSgpLCBpID0ge30sIHZlcmIoXCJuZXh0XCIpLCB2ZXJiKFwidGhyb3dcIiksIHZlcmIoXCJyZXR1cm5cIiksIGlbU3ltYm9sLmFzeW5jSXRlcmF0b3JdID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gdGhpczsgfSwgaSk7XG4gIGZ1bmN0aW9uIHZlcmIobikgeyBpW25dID0gb1tuXSAmJiBmdW5jdGlvbiAodikgeyByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgeyB2ID0gb1tuXSh2KSwgc2V0dGxlKHJlc29sdmUsIHJlamVjdCwgdi5kb25lLCB2LnZhbHVlKTsgfSk7IH07IH1cbiAgZnVuY3Rpb24gc2V0dGxlKHJlc29sdmUsIHJlamVjdCwgZCwgdikgeyBQcm9taXNlLnJlc29sdmUodikudGhlbihmdW5jdGlvbih2KSB7IHJlc29sdmUoeyB2YWx1ZTogdiwgZG9uZTogZCB9KTsgfSwgcmVqZWN0KTsgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gX19tYWtlVGVtcGxhdGVPYmplY3QoY29va2VkLCByYXcpIHtcbiAgaWYgKE9iamVjdC5kZWZpbmVQcm9wZXJ0eSkgeyBPYmplY3QuZGVmaW5lUHJvcGVydHkoY29va2VkLCBcInJhd1wiLCB7IHZhbHVlOiByYXcgfSk7IH0gZWxzZSB7IGNvb2tlZC5yYXcgPSByYXc7IH1cbiAgcmV0dXJuIGNvb2tlZDtcbn07XG5cbnZhciBfX3NldE1vZHVsZURlZmF1bHQgPSBPYmplY3QuY3JlYXRlID8gKGZ1bmN0aW9uKG8sIHYpIHtcbiAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG8sIFwiZGVmYXVsdFwiLCB7IGVudW1lcmFibGU6IHRydWUsIHZhbHVlOiB2IH0pO1xufSkgOiBmdW5jdGlvbihvLCB2KSB7XG4gIG9bXCJkZWZhdWx0XCJdID0gdjtcbn07XG5cbmV4cG9ydCBmdW5jdGlvbiBfX2ltcG9ydFN0YXIobW9kKSB7XG4gIGlmIChtb2QgJiYgbW9kLl9fZXNNb2R1bGUpIHJldHVybiBtb2Q7XG4gIHZhciByZXN1bHQgPSB7fTtcbiAgaWYgKG1vZCAhPSBudWxsKSBmb3IgKHZhciBrIGluIG1vZCkgaWYgKGsgIT09IFwiZGVmYXVsdFwiICYmIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChtb2QsIGspKSBfX2NyZWF0ZUJpbmRpbmcocmVzdWx0LCBtb2QsIGspO1xuICBfX3NldE1vZHVsZURlZmF1bHQocmVzdWx0LCBtb2QpO1xuICByZXR1cm4gcmVzdWx0O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gX19pbXBvcnREZWZhdWx0KG1vZCkge1xuICByZXR1cm4gKG1vZCAmJiBtb2QuX19lc01vZHVsZSkgPyBtb2QgOiB7IGRlZmF1bHQ6IG1vZCB9O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gX19jbGFzc1ByaXZhdGVGaWVsZEdldChyZWNlaXZlciwgc3RhdGUsIGtpbmQsIGYpIHtcbiAgaWYgKGtpbmQgPT09IFwiYVwiICYmICFmKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiUHJpdmF0ZSBhY2Nlc3NvciB3YXMgZGVmaW5lZCB3aXRob3V0IGEgZ2V0dGVyXCIpO1xuICBpZiAodHlwZW9mIHN0YXRlID09PSBcImZ1bmN0aW9uXCIgPyByZWNlaXZlciAhPT0gc3RhdGUgfHwgIWYgOiAhc3RhdGUuaGFzKHJlY2VpdmVyKSkgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCByZWFkIHByaXZhdGUgbWVtYmVyIGZyb20gYW4gb2JqZWN0IHdob3NlIGNsYXNzIGRpZCBub3QgZGVjbGFyZSBpdFwiKTtcbiAgcmV0dXJuIGtpbmQgPT09IFwibVwiID8gZiA6IGtpbmQgPT09IFwiYVwiID8gZi5jYWxsKHJlY2VpdmVyKSA6IGYgPyBmLnZhbHVlIDogc3RhdGUuZ2V0KHJlY2VpdmVyKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIF9fY2xhc3NQcml2YXRlRmllbGRTZXQocmVjZWl2ZXIsIHN0YXRlLCB2YWx1ZSwga2luZCwgZikge1xuICBpZiAoa2luZCA9PT0gXCJtXCIpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJQcml2YXRlIG1ldGhvZCBpcyBub3Qgd3JpdGFibGVcIik7XG4gIGlmIChraW5kID09PSBcImFcIiAmJiAhZikgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlByaXZhdGUgYWNjZXNzb3Igd2FzIGRlZmluZWQgd2l0aG91dCBhIHNldHRlclwiKTtcbiAgaWYgKHR5cGVvZiBzdGF0ZSA9PT0gXCJmdW5jdGlvblwiID8gcmVjZWl2ZXIgIT09IHN0YXRlIHx8ICFmIDogIXN0YXRlLmhhcyhyZWNlaXZlcikpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3Qgd3JpdGUgcHJpdmF0ZSBtZW1iZXIgdG8gYW4gb2JqZWN0IHdob3NlIGNsYXNzIGRpZCBub3QgZGVjbGFyZSBpdFwiKTtcbiAgcmV0dXJuIChraW5kID09PSBcImFcIiA/IGYuY2FsbChyZWNlaXZlciwgdmFsdWUpIDogZiA/IGYudmFsdWUgPSB2YWx1ZSA6IHN0YXRlLnNldChyZWNlaXZlciwgdmFsdWUpKSwgdmFsdWU7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBfX2NsYXNzUHJpdmF0ZUZpZWxkSW4oc3RhdGUsIHJlY2VpdmVyKSB7XG4gIGlmIChyZWNlaXZlciA9PT0gbnVsbCB8fCAodHlwZW9mIHJlY2VpdmVyICE9PSBcIm9iamVjdFwiICYmIHR5cGVvZiByZWNlaXZlciAhPT0gXCJmdW5jdGlvblwiKSkgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCB1c2UgJ2luJyBvcGVyYXRvciBvbiBub24tb2JqZWN0XCIpO1xuICByZXR1cm4gdHlwZW9mIHN0YXRlID09PSBcImZ1bmN0aW9uXCIgPyByZWNlaXZlciA9PT0gc3RhdGUgOiBzdGF0ZS5oYXMocmVjZWl2ZXIpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gX19hZGREaXNwb3NhYmxlUmVzb3VyY2UoZW52LCB2YWx1ZSwgYXN5bmMpIHtcbiAgaWYgKHZhbHVlICE9PSBudWxsICYmIHZhbHVlICE9PSB2b2lkIDApIHtcbiAgICBpZiAodHlwZW9mIHZhbHVlICE9PSBcIm9iamVjdFwiICYmIHR5cGVvZiB2YWx1ZSAhPT0gXCJmdW5jdGlvblwiKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiT2JqZWN0IGV4cGVjdGVkLlwiKTtcbiAgICB2YXIgZGlzcG9zZTtcbiAgICBpZiAoYXN5bmMpIHtcbiAgICAgICAgaWYgKCFTeW1ib2wuYXN5bmNEaXNwb3NlKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3ltYm9sLmFzeW5jRGlzcG9zZSBpcyBub3QgZGVmaW5lZC5cIik7XG4gICAgICAgIGRpc3Bvc2UgPSB2YWx1ZVtTeW1ib2wuYXN5bmNEaXNwb3NlXTtcbiAgICB9XG4gICAgaWYgKGRpc3Bvc2UgPT09IHZvaWQgMCkge1xuICAgICAgICBpZiAoIVN5bWJvbC5kaXNwb3NlKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3ltYm9sLmRpc3Bvc2UgaXMgbm90IGRlZmluZWQuXCIpO1xuICAgICAgICBkaXNwb3NlID0gdmFsdWVbU3ltYm9sLmRpc3Bvc2VdO1xuICAgIH1cbiAgICBpZiAodHlwZW9mIGRpc3Bvc2UgIT09IFwiZnVuY3Rpb25cIikgdGhyb3cgbmV3IFR5cGVFcnJvcihcIk9iamVjdCBub3QgZGlzcG9zYWJsZS5cIik7XG4gICAgZW52LnN0YWNrLnB1c2goeyB2YWx1ZTogdmFsdWUsIGRpc3Bvc2U6IGRpc3Bvc2UsIGFzeW5jOiBhc3luYyB9KTtcbiAgfVxuICBlbHNlIGlmIChhc3luYykge1xuICAgIGVudi5zdGFjay5wdXNoKHsgYXN5bmM6IHRydWUgfSk7XG4gIH1cbiAgcmV0dXJuIHZhbHVlO1xufVxuXG52YXIgX1N1cHByZXNzZWRFcnJvciA9IHR5cGVvZiBTdXBwcmVzc2VkRXJyb3IgPT09IFwiZnVuY3Rpb25cIiA/IFN1cHByZXNzZWRFcnJvciA6IGZ1bmN0aW9uIChlcnJvciwgc3VwcHJlc3NlZCwgbWVzc2FnZSkge1xuICB2YXIgZSA9IG5ldyBFcnJvcihtZXNzYWdlKTtcbiAgcmV0dXJuIGUubmFtZSA9IFwiU3VwcHJlc3NlZEVycm9yXCIsIGUuZXJyb3IgPSBlcnJvciwgZS5zdXBwcmVzc2VkID0gc3VwcHJlc3NlZCwgZTtcbn07XG5cbmV4cG9ydCBmdW5jdGlvbiBfX2Rpc3Bvc2VSZXNvdXJjZXMoZW52KSB7XG4gIGZ1bmN0aW9uIGZhaWwoZSkge1xuICAgIGVudi5lcnJvciA9IGVudi5oYXNFcnJvciA/IG5ldyBfU3VwcHJlc3NlZEVycm9yKGUsIGVudi5lcnJvciwgXCJBbiBlcnJvciB3YXMgc3VwcHJlc3NlZCBkdXJpbmcgZGlzcG9zYWwuXCIpIDogZTtcbiAgICBlbnYuaGFzRXJyb3IgPSB0cnVlO1xuICB9XG4gIGZ1bmN0aW9uIG5leHQoKSB7XG4gICAgd2hpbGUgKGVudi5zdGFjay5sZW5ndGgpIHtcbiAgICAgIHZhciByZWMgPSBlbnYuc3RhY2sucG9wKCk7XG4gICAgICB0cnkge1xuICAgICAgICB2YXIgcmVzdWx0ID0gcmVjLmRpc3Bvc2UgJiYgcmVjLmRpc3Bvc2UuY2FsbChyZWMudmFsdWUpO1xuICAgICAgICBpZiAocmVjLmFzeW5jKSByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHJlc3VsdCkudGhlbihuZXh0LCBmdW5jdGlvbihlKSB7IGZhaWwoZSk7IHJldHVybiBuZXh0KCk7IH0pO1xuICAgICAgfVxuICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICBmYWlsKGUpO1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAoZW52Lmhhc0Vycm9yKSB0aHJvdyBlbnYuZXJyb3I7XG4gIH1cbiAgcmV0dXJuIG5leHQoKTtcbn1cblxuZXhwb3J0IGRlZmF1bHQge1xuICBfX2V4dGVuZHMsXG4gIF9fYXNzaWduLFxuICBfX3Jlc3QsXG4gIF9fZGVjb3JhdGUsXG4gIF9fcGFyYW0sXG4gIF9fbWV0YWRhdGEsXG4gIF9fYXdhaXRlcixcbiAgX19nZW5lcmF0b3IsXG4gIF9fY3JlYXRlQmluZGluZyxcbiAgX19leHBvcnRTdGFyLFxuICBfX3ZhbHVlcyxcbiAgX19yZWFkLFxuICBfX3NwcmVhZCxcbiAgX19zcHJlYWRBcnJheXMsXG4gIF9fc3ByZWFkQXJyYXksXG4gIF9fYXdhaXQsXG4gIF9fYXN5bmNHZW5lcmF0b3IsXG4gIF9fYXN5bmNEZWxlZ2F0b3IsXG4gIF9fYXN5bmNWYWx1ZXMsXG4gIF9fbWFrZVRlbXBsYXRlT2JqZWN0LFxuICBfX2ltcG9ydFN0YXIsXG4gIF9faW1wb3J0RGVmYXVsdCxcbiAgX19jbGFzc1ByaXZhdGVGaWVsZEdldCxcbiAgX19jbGFzc1ByaXZhdGVGaWVsZFNldCxcbiAgX19jbGFzc1ByaXZhdGVGaWVsZEluLFxuICBfX2FkZERpc3Bvc2FibGVSZXNvdXJjZSxcbiAgX19kaXNwb3NlUmVzb3VyY2VzLFxufTtcbiJdLCJuYW1lcyI6WyJfX19DU1NfTE9BREVSX0VYUE9SVF9fXyIsInB1c2giLCJtb2R1bGUiLCJpZCIsImxvY2FscyIsIm9wdGlvbnMiLCJzdHlsZVRhZ1RyYW5zZm9ybSIsInNldEF0dHJpYnV0ZXMiLCJpbnNlcnQiLCJkb21BUEkiLCJpbnNlcnRTdHlsZUVsZW1lbnQiLCJ1bmRlZmluZWQiLCJWaWV3SW5wdXRJbWFnZSIsInByb3BzIiwidmFsdWUiLCJvbkNoYW5nZSIsIndpZHRoIiwiaGVpZ2h0IiwiYnVzeUljb24iLCJCdXN5SWNvbiIsIkljb25Mb2FkaW5nIiwicmVmQ2FudmFzIiwicmVmSW5wdXQiLCJidXN5Iiwic2V0QnVzeSIsInBhaW50T25DYW52YXMiLCJpbXBvcnRJbWFnZSIsInVybCIsInRoaXMiLCJpbWciLCJQcm9taXNlIiwicmVzb2x2ZSIsIkltYWdlIiwiY3Jvc3NPcmlnaW4iLCJvbmxvYWQiLCJvbmVycm9yIiwiY29uc29sZSIsImVycm9yIiwic3JjIiwibG9hZEltYWdlIiwiY2FudmFzIiwiY3VycmVudCIsImN0eCIsImdldENvbnRleHQiLCJFcnJvciIsInciLCJoIiwiY2xlYXJSZWN0Iiwic2NhbGVYIiwic2NhbGVZIiwic2NhbGUiLCJNYXRoIiwibWF4IiwiZHciLCJkaCIsIngiLCJ5IiwiZHJhd0ltYWdlIiwiZGF0YVVybCIsInRvRGF0YVVSTCIsInVzZUVmZmVjdCIsInVzZUNhbnZhc1BhaW50ZXIiLCJzdHlsZSIsIk9iamVjdCIsImFzc2lnbiIsIm9uQ2xpY2siLCJpbnB1dCIsImNsaWNrIiwiY2hpbGRyZW4iLCJjbGFzc05hbWUiLCJjbGFzc05hbWVzIiwiam9pbiIsIklucHV0SW1hZ2UiLCJtYXhXaWR0aCIsInBhZGRpbmdCb3R0b20iLCJiYWNrZ3JvdW5kSW1hZ2UiLCJyZWYiLCJub3RCdXN5IiwiZGlzcGxheSIsInBsYWNlSXRlbXMiLCJjb2xvciIsInNpemUiLCJhbmltYXRlIiwidHlwZSIsImFjY2VwdCIsIm11bHRpcGxlIiwiZXZ0IiwiX2EiLCJ0YXJnZXQiLCJmaWxlIiwiZmlsZXMiLCJyZWFkZXIiLCJGaWxlUmVhZGVyIiwiYWRkRXZlbnRMaXN0ZW5lciIsInJlc3VsdCIsInRoZW4iLCJjYXRjaCIsImV4IiwibmFtZSIsInJlYWRBc0RhdGFVUkwiLCJEZW1vIiwic2V0VXJsIiwiSW5wdXRJbWFnZURvY3VtZW50YXRpb24iLCJWaWV3RG9jdW1lbnRhdGlvbiIsInRpdGxlIiwiVmlld0RlbW8iLCJkZXNjcmlwdGlvbiIsImV4YW1wbGUiLCJQYWdlVmlld0lucHV0SW1hZ2UiLCIkIiwiVmlld1RvdWNoYWJsZSIsInRhZyIsInRvb2x0aXAiLCJUb3VjaGFibGUiLCJfX3Jlc3QiLCJzIiwiZSIsInQiLCJwIiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJjYWxsIiwiaW5kZXhPZiIsImdldE93blByb3BlcnR5U3ltYm9scyIsImkiLCJsZW5ndGgiLCJwcm9wZXJ0eUlzRW51bWVyYWJsZSIsIl9fYXdhaXRlciIsInRoaXNBcmciLCJfYXJndW1lbnRzIiwiUCIsImdlbmVyYXRvciIsInJlamVjdCIsImZ1bGZpbGxlZCIsInN0ZXAiLCJuZXh0IiwicmVqZWN0ZWQiLCJkb25lIiwiYXBwbHkiLCJjcmVhdGUiLCJTdXBwcmVzc2VkRXJyb3IiXSwic291cmNlUm9vdCI6IiJ9